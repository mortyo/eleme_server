(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["shop"],{"07ac":function(t,e,s){var i=s("23e7"),o=s("6f53").values;i({target:"Object",stat:!0},{values:function(t){return o(t)}})},"0ab0":function(t,e,s){"use strict";var i=s("6d7a"),o=s.n(i);o.a},1148:function(t,e,s){"use strict";var i=s("a691"),o=s("1d80");t.exports="".repeat||function(t){var e=String(o(this)),s="",a=i(t);if(a<0||a==1/0)throw RangeError("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(e+=e))1&a&&(s+=e);return s}},"24e5":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"shop_page"},[t.showLoading?t._e():s("section",{staticClass:"shop_container"},[s("header",{ref:"shopheader",staticClass:"shop_detail_header",style:{zIndex:t.showActivities?"14":"10"}},[s("router-link",{staticClass:"description_header",attrs:{to:"/shop/shopDetail"}},[s("section",{staticClass:"description_left"},[s("div",[s("img",{attrs:{src:t.imgBaseUrl+t.shopDetailData.image_path}})])]),s("section",{staticClass:"description_right"},[s("h4",{staticClass:"description_title"},[t._v(t._s(t.shopDetailData.name))]),s("p",{staticClass:"description_text"},[t._v("商家配送／"+t._s(t.shopDetailData.order_lead_time)+"分钟送达／配送费¥"+t._s(t.shopDetailData.float_delivery_fee))]),s("p",{staticClass:"description_promotion"},[t._v("公告："+t._s(t.promotionInfo))])])]),t.shopDetailData.activities.length?s("footer",{staticClass:"description_footer",on:{click:t.showActivitiesFun}},[s("p",[s("span",{staticClass:"tip_icon",style:{backgroundColor:"#"+t.shopDetailData.activities[0].icon_color,borderColor:"#"+t.shopDetailData.activities[0].icon_color}},[t._v(t._s(t.shopDetailData.activities[0].icon_name))]),s("span",[t._v(t._s(t.shopDetailData.activities[0].description)+"（APP专享）")])]),s("p",[t._v(t._s(t.shopDetailData.activities.length)+"个活动")])]):t._e()],1),s("el-tabs",[s("el-tab-pane",{attrs:{label:"商品"}},[s("section",{staticClass:"food_container"},[s("section",{staticClass:"menu_container"},[s("section",{ref:"wrapperMenu",staticClass:"menu_left",attrs:{id:"wrapper_menu"}},[s("ul",t._l(t.menuList,(function(e,i){return s("li",{key:i,staticClass:"menu_left_li",class:{activity_menu:i==t.menuIndex},on:{click:function(e){return t.chooseMenu(i)}}},[e.icon_url?s("img",{attrs:{src:t.imgBaseUrl+e.icon_url}}):t._e(),s("span",[t._v(t._s(e.name))]),t.categoryNum[i]&&1==e.type?s("el-badge",{attrs:{value:t.categoryNum[i]}}):t._e()],1)})),0)]),s("section",{ref:"menuFoodList",staticClass:"menu_right"},[s("ul",t._l(t.menuList,(function(e,i){return s("li",{key:i},[s("header",{staticClass:"menu_detail_header"},[s("strong",{staticClass:"menu_item_title"},[t._v(t._s(e.name))]),s("span",{staticClass:"menu_item_description"},[t._v(t._s(e.description))])]),s("div",{staticClass:"menu_detail_list_all"},t._l(e.foods,(function(e,i){return s("section",{key:i,staticClass:"menu_detail_list"},[s("router-link",{staticClass:"menu_detail_link",attrs:{to:{path:"shop/foodDetail",query:{image_path:e.image_path,description:e.description,month_sales:e.month_sales,name:e.name,rating:e.rating,rating_count:e.rating_count,satisfy_rate:e.satisfy_rate,foods:e,shopId:t.shopId}},tag:"div"}},[s("section",{staticClass:"menu_food_img"},[s("img",{attrs:{src:t.imgBaseUrl+e.image_path}})]),s("section",{staticClass:"menu_food_description"},[s("h3",{staticClass:"food_description_head"},[s("strong",{staticClass:"description_foodname"},[t._v(t._s(e.name))]),e.attributes.length?s("ul",{staticClass:"attributes_ul"},t._l(e.attributes,(function(e,i){return s("li",{key:i},[e?s("p",{style:{color:"新"==e.icon_name?"#fff":"#"+e.icon_color}},[t._v(t._s("新"==e.icon_name?"新品":e.icon_name))]):t._e()])})),0):t._e()]),s("p",{staticClass:"food_description_content"},[t._v(t._s(e.description))]),s("p",{staticClass:"food_description_sale_rating"},[s("span",[t._v("月售"+t._s(e.month_sales)+"份")]),s("span",[t._v("好评率"+t._s(e.satisfy_rate)+"%")])]),e.activity?s("p",{staticClass:"food_activity"},[s("span",{style:{color:"#"+e.activity.image_text_color,borderColor:"#"+e.activity.icon_color}},[t._v(t._s(e.activity.image_text))])]):t._e()])]),s("footer",{staticClass:"menu_detail_foot"},[s("section",{staticClass:"food_price"},[s("span",[t._v("¥")]),s("span",[t._v(t._s(e.specfoods[0].price))]),e.specifications.length?s("span",[t._v("起")]):t._e()]),s("buy-cart",{attrs:{shopId:t.shopId,foods:e},on:{moveInCart:t.listenInCart,showChooseList:t.showChooseList,showReduceTip:t.showReduceTip,showMoveDot:t.showMoveDotFun}})],1)],1)})),0)])})),0)])]),s("section",{staticClass:"buy_cart_container"},[s("section",{staticClass:"cart_icon_num",on:{click:t.toggleCartList}},[s("div",{ref:"cartContainer",staticClass:"cart_icon_container",class:{cart_icon_activity:t.totalPrice>0,move_in_cart:t.receiveInCart}},[t.totalNum?s("span",{staticClass:"cart_list_length"},[t._v(" "+t._s(t.totalNum)+" ")]):t._e(),s("i",{staticClass:"el-icon-shopping-cart-2"})]),s("div",{staticClass:"cart_num"},[s("div",[t._v("¥ "+t._s(t.totalPrice))]),s("div",[t._v("配送费¥"+t._s(t.deliveryFee))])])]),s("section",{staticClass:"gotopay",class:{gotopay_acitvity:t.minimumOrderAmount<=0}},[t.minimumOrderAmount>0?s("span",{staticClass:"gotopay_button_style"},[t._v("还差¥"+t._s(t.minimumOrderAmount)+"起送")]):s("router-link",{staticClass:"gotopay_button_style",attrs:{to:{path:"/confirmOrder",query:{geohash:t.geohash,shopId:t.shopId}}}},[t._v("去结算")])],1)]),s("transition",{attrs:{name:"toggle-cart"}},[s("section",{directives:[{name:"show",rawName:"v-show",value:t.showCartList&&t.cartFoodList.length,expression:"showCartList&&cartFoodList.length"}],staticClass:"cart_food_list"},[s("header",[s("h4",[t._v("购物车")]),s("div",{on:{click:t.clearCart}},[s("span",{staticClass:"clear_cart"},[t._v("清空")])])]),s("section",{staticClass:"cart_food_details",attrs:{id:"cartFood"}},[s("ul",t._l(t.cartFoodList,(function(e,i){return s("li",{key:i,staticClass:"cart_food_li"},[s("div",{staticClass:"cart_list_num"},[s("p",{staticClass:"ellipsis"},[t._v(t._s(e.name))]),s("p",{staticClass:"ellipsis"},[t._v(t._s(e.specs))])]),s("div",{staticClass:"cart_list_price"},[s("span",[t._v("¥")]),s("span",[t._v(t._s(e.price))])]),s("section",{staticClass:"cart_list_control"},[s("i",{staticClass:"el-icon-remove-outline",on:{click:function(s){return t.removeOutCart(e.category_id,e.item_id,e.food_id,e.name,e.price,e.specs)}}}),s("span",{staticClass:"cart_num"},[t._v(t._s(e.num))]),s("i",{staticClass:"el-icon-circle-plus-outline",on:{click:function(s){return t.addToCart(e.category_id,e.item_id,e.food_id,e.name,e.price,e.specs)}}})])])})),0)])])]),s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.showCartList&&t.cartFoodList.length,expression:"showCartList&&cartFoodList.length"}],staticClass:"screen_cover",on:{click:t.toggleCartList}})])],1)]),s("el-tab-pane",{attrs:{label:"评价"}},[s("section",{staticClass:"rating_container",attrs:{id:"ratingContainer"}},[s("section",{directives:[{name:"load-more",rawName:"v-load-more",value:t.loaderMoreRating,expression:"loaderMoreRating"}],attrs:{type:"2"}},[s("section",[s("header",{staticClass:"rating_header"},[s("section",{staticClass:"rating_header_left"},[s("p",[t._v(t._s(t.shopDetailData.rating))]),s("p",[t._v("综合评价")]),s("p",[t._v("高于周边商家"+t._s((100*t.ratingScoresData.compare_rating).toFixed(1))+"%")])]),s("section",{staticClass:"rating_header_right"},[s("p",[s("span",[t._v("服务态度")]),s("el-rate",{attrs:{disabled:"","show-score":"","text-color":"#ff9900","score-template":"{value}"},model:{value:t.ratingScoresData.service_score,callback:function(e){t.$set(t.ratingScoresData,"service_score",e)},expression:"ratingScoresData.service_score"}})],1),s("p",[s("span",[t._v("菜品评价")]),s("el-rate",{attrs:{disabled:"","show-score":"","text-color":"#ff9900","score-template":"{value}"},model:{value:t.ratingScoresData.food_score,callback:function(e){t.$set(t.ratingScoresData,"food_score",e)},expression:"ratingScoresData.food_score"}})],1),s("p",[s("span",[t._v("送达时间")]),s("span",{staticClass:"delivery_time"},[t._v(t._s(t.shopDetailData.order_lead_time)+"分钟")])])])]),s("ul",{staticClass:"tag_list_ul"},t._l(t.ratingTagsList,(function(e,i){return s("li",{key:i,class:{unsatisfied:e.unsatisfied,tagActivity:t.ratingTageIndex==i},on:{click:function(s){return t.changeTgeIndex(i,e.name)}}},[t._v(t._s(e.name)+"("+t._s(e.count)+")")])})),0),s("ul",{staticClass:"rating_list_ul"},t._l(t.ratingList,(function(e,i){return s("li",{key:i,staticClass:"rating_list_li"},[s("img",{staticClass:"user_avatar",attrs:{src:t.imgBaseUrl+e.avatar}}),s("section",{staticClass:"rating_list_details"},[s("header",[s("section",{staticClass:"username_star"},[s("p",{staticClass:"username"},[t._v(t._s(e.username))]),s("p",{staticClass:"star_desc"},[s("el-rate",{attrs:{disabled:"","show-score":"","text-color":"#ff9900","score-template":"{value}"},model:{value:e.rating_star,callback:function(s){t.$set(e,"rating_star",s)},expression:"item.rating_star"}})],1)]),s("time",{staticClass:"rated_at"},[t._v(t._s(e.rated_at))])]),s("ul",{staticClass:"food_img_ul"},t._l(e.item_ratings,(function(e,i){return s("li",{key:i},[e.image_hash?s("img",{attrs:{src:t.imgBaseUrl+e.image_hash}}):t._e()])})),0),s("ul",{staticClass:"food_name_ul"},t._l(e.item_ratings,(function(e,i){return s("li",{key:i,staticClass:"ellipsis"},[t._v(" "+t._s(e.food_name)+" ")])})),0)])])})),0)])])])])],1)],1),s("section",{staticClass:"shop_cart"},[s("transition",{attrs:{name:"fade"}},[t.showSpecs?s("div",{staticClass:"specs_cover",on:{click:t.showChooseList}}):t._e()]),s("transition",{attrs:{name:"fadeBounce"}},[t.showSpecs?s("div",{staticClass:"specs_list"},[s("header",{staticClass:"specs_list_header"},[s("h4",{staticClass:"ellipsis"},[t._v(t._s(t.choosedFoods.name))]),s("i",{staticClass:"el-icon-close",on:{click:t.showChooseList}})]),s("section",{staticClass:"specs_details"},[s("h5",{staticClass:"specs_details_title"},[t._v(t._s(t.choosedFoods.specifications[0].name))]),s("ul",t._l(t.choosedFoods.specifications[0].values,(function(e,i){return s("li",{key:i,class:{specs_activity:i==t.specsIndex},on:{click:function(e){return t.chooseSpecs(i)}}},[t._v(" "+t._s(e)+" ")])})),0)]),s("footer",{staticClass:"specs_footer"},[s("div",{staticClass:"specs_price"},[s("span",[t._v("¥ ")]),s("span",[t._v(t._s(t.choosedFoods.specfoods[t.specsIndex].price))])]),s("div",{staticClass:"specs_addto_cart",on:{click:function(e){return t.addSpecs(t.choosedFoods.category_id,t.choosedFoods.item_id,t.choosedFoods.specfoods[t.specsIndex].food_id,t.choosedFoods.specfoods[t.specsIndex].name,t.choosedFoods.specfoods[t.specsIndex].price,t.choosedFoods.specifications[0].values[t.specsIndex],t.choosedFoods.specfoods[t.specsIndex].packing_fee,t.choosedFoods.specfoods[t.specsIndex].sku_id,t.choosedFoods.specfoods[t.specsIndex].stock)}}},[t._v("加入购物车")])])]):t._e()])],1),s("transition",{attrs:{name:"fade"}},[t.showDeleteTip?s("p",{staticClass:"show_delete_tip"},[t._v("多规格商品只能去购物车删除哦")]):t._e()]),t._l(t.showMoveDot,(function(e){return s("transition",{key:e.index,attrs:{appear:""},on:{"after-appear":t.afterEnter,"before-appear":t.beforeEnter}},[e?s("span",{staticClass:"move_dot"},[s("svg",{staticClass:"move_liner"},[s("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#cart-add"}})])]):t._e()])})),s("loading",{directives:[{name:"show",rawName:"v-show",value:t.showLoading||t.loadRatings,expression:"showLoading || loadRatings"}]}),s("transition",{attrs:{name:"router-slid",mode:"out-in"}},[s("router-view")],1)],2)},o=[],a=(s("99af"),s("4160"),s("a630"),s("d81d"),s("b0c0"),s("b680"),s("b64b"),s("3ca3"),s("159b"),s("2909")),n=(s("96cf"),s("1da1")),r=s("5530"),c=s("2f62"),l=s("bdaa"),d=s("bf93"),u=s("319f"),h=s("51be"),_=s("1fba"),p={data:function(){return{geohash:"",shopId:null,showLoading:!0,changeShowType:"food",shopDetailData:null,showActivities:!1,menuList:[],menuIndex:0,menuIndexChange:!0,shopListTop:[],TitleDetailIndex:null,categoryNum:[],totalPrice:0,cartFoodList:[],showCartList:!1,receiveInCart:!1,ratingList:null,ratingOffset:0,ratingScoresData:null,ratingTagsList:null,ratingTageIndex:0,preventRepeatRequest:!1,ratingTagName:"",loadRatings:!1,foodScroll:null,showSpecs:!1,specsIndex:0,choosedFoods:null,showDeleteTip:!1,showMoveDot:[],windowHeight:null,elLeft:0,elBottom:0,ratingScroll:null,imgBaseUrl:h["a"]}},created:function(){this.geohash=this.$route.query.geohash,this.shopId=this.$route.query.id,this.INIT_BUYCART()},mounted:function(){this.initData(),this.windowHeight=window.innerHeight},beforeDestroy:function(){},components:{loading:d["a"],buyCart:u["a"]},computed:Object(r["a"])({},Object(c["d"])(["latitude","longitude","cartList"]),{promotionInfo:function(){return this.shopDetailData.promotion_info||"欢迎光临，用餐高峰期请提前下单，谢谢。"},deliveryFee:function(){return this.shopDetailData?this.shopDetailData.float_delivery_fee:null},minimumOrderAmount:function(){return this.shopDetailData?this.shopDetailData.float_minimum_order_amount-this.totalPrice:null},shopCart:function(){return Object(r["a"])({},this.cartList[this.shopId])},totalNum:function(){var t=0;return this.cartFoodList.forEach((function(e){t+=e.num})),t}}),methods:Object(r["a"])({},Object(c["c"])(["RECORD_ADDRESS","ADD_CART","REDUCE_CART","INIT_BUYCART","CLEAR_CART","RECORD_SHOPDETAIL"]),{initData:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.latitude){e.next=5;break}return e.next=3,Object(l["q"])(t.geohash);case 3:s=e.sent,t.RECORD_ADDRESS(s);case 5:return e.next=7,Object(l["z"])(t.shopId,t.latitude,t.longitude).then((function(e){t.shopDetailData=e.data}));case 7:return e.next=9,Object(l["h"])(t.shopId).then((function(e){t.menuList=e.data,console.log(t.menuList)}));case 9:return e.next=11,Object(l["m"])(t.shopId,t.ratingOffset).then((function(e){t.ratingList=e.data}));case 11:return e.next=13,Object(l["v"])(t.shopId).then((function(e){t.ratingScoresData=e.data}));case 13:return e.next=15,Object(l["w"])(t.shopId).then((function(e){t.ratingTagsList=e.data}));case 15:t.RECORD_SHOPDETAIL(t.shopDetailData),t.hideLoading();case 17:case"end":return e.stop()}}),e)})))()},getFoodListHeight:function(){var t=this,e=this.$refs.menuFoodList;if(e){var s=Array.from(e.children[0].children);s.forEach((function(e,s){t.shopListTop[s]=e.offsetTop})),this.listenScroll(e)}},listenScroll:function(t){var e=this;this.foodScroll=new _["a"](t,{probeType:3,deceleration:.001,bounce:!1,swipeTime:2e3,click:!0});var s=new _["a"]("#wrapper_menu",{click:!0}),i=this.$refs.wrapperMenu.clientHeight;this.foodScroll.on("scroll",(function(t){e.$refs.wrapperMenu&&e.shopListTop.forEach((function(o,a){if(e.menuIndexChange&&Math.abs(Math.round(t.y))>=o){e.menuIndex=a;var n=e.$refs.wrapperMenu.querySelectorAll(".activity_menu"),r=n[0];s.scrollToElement(r,800,0,-(i/2-50))}}))}))},showActivitiesFun:function(){this.showActivities=!this.showActivities},chooseMenu:function(t){var e=this;this.menuIndex=t,this.menuIndexChange=!1,this.foodScroll.scrollTo(0,-this.shopListTop[t],400),this.foodScroll.on("scrollEnd",(function(){e.menuIndexChange=!0}))},showTitleDetail:function(t){this.TitleDetailIndex==t?this.TitleDetailIndex=null:this.TitleDetailIndex=t},addToCart:function(t,e,s,i,o,a){this.ADD_CART({shopid:this.shopId,category_id:t,item_id:e,food_id:s,name:i,price:o,specs:a})},removeOutCart:function(t,e,s,i,o,a){this.REDUCE_CART({shopid:this.shopId,category_id:t,item_id:e,food_id:s,name:i,price:o,specs:a})},initCategoryNum:function(){var t=this,e=[],s=0;this.totalPrice=0,this.cartFoodList=[],this.menuList.forEach((function(i,o){if(t.shopCart&&t.shopCart[i.foods[0].category_id]){var a=0;Object.keys(t.shopCart[i.foods[0].category_id]).forEach((function(e){Object.keys(t.shopCart[i.foods[0].category_id][e]).forEach((function(o){var n=t.shopCart[i.foods[0].category_id][e][o];a+=n.num,1==i.type&&(t.totalPrice+=n.num*n.price,n.num>0&&(t.cartFoodList[s]={},t.cartFoodList[s].category_id=i.foods[0].category_id,t.cartFoodList[s].item_id=e,t.cartFoodList[s].food_id=o,t.cartFoodList[s].num=n.num,t.cartFoodList[s].price=n.price,t.cartFoodList[s].name=n.name,t.cartFoodList[s].specs=n.specs,s++))}))})),e[o]=a}else e[o]=0})),this.totalPrice=this.totalPrice.toFixed(2),this.categoryNum=[].concat(e)},toggleCartList:function(){!this.cartFoodList.length||(this.showCartList=!this.showCartList)},clearCart:function(){this.toggleCartList(),this.CLEAR_CART(this.shopId)},listenInCart:function(){var t=this;this.receiveInCart||(this.receiveInCart=!0,this.$refs.cartContainer.addEventListener("animationend",(function(){t.receiveInCart=!1})),this.$refs.cartContainer.addEventListener("webkitAnimationEnd",(function(){t.receiveInCart=!1})))},changeTgeIndex:function(t,e){var s=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){var o;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return s.ratingTageIndex=t,s.ratingOffset=0,s.ratingTagName=e,i.next=5,Object(l["m"])(s.shopId,s.ratingOffset,e);case 5:o=i.sent,s.ratingList=Object(a["a"])(o.data),s.$nextTick((function(){s.ratingScroll.refresh()}));case 8:case"end":return i.stop()}}),i)})))()},loaderMoreRating:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.preventRepeatRequest){e.next=2;break}return e.abrupt("return");case 2:return t.loadRatings=!0,t.preventRepeatRequest=!0,t.ratingOffset+=10,e.next=7,Object(l["m"])(t.shopId,t.ratingOffset,t.ratingTagName);case 7:s=e.sent,t.ratingList=[].concat(Object(a["a"])(t.ratingList),Object(a["a"])(s.data)),t.loadRatings=!1,s.length>=10&&(t.preventRepeatRequest=!1);case 11:case"end":return e.stop()}}),e)})))()},hideLoading:function(){this.showLoading=!1},showChooseList:function(t){t&&(this.choosedFoods=t),this.showSpecs=!this.showSpecs,this.specsIndex=0},chooseSpecs:function(t){this.specsIndex=t},addSpecs:function(t,e,s,i,o,a,n,r,c){this.ADD_CART({shopid:this.shopId,category_id:t,item_id:e,food_id:s,name:i,price:o,specs:a,packing_fee:n,sku_id:r,stock:c}),this.showChooseList()},showReduceTip:function(){var t=this;this.showDeleteTip=!0,clearTimeout(this.timer),this.timer=setTimeout((function(){clearTimeout(t.timer),t.showDeleteTip=!1}),3e3)},showMoveDotFun:function(t,e,s){this.showMoveDot=[].concat(Object(a["a"])(this.showMoveDot),Object(a["a"])(t)),this.elLeft=e,this.elBottom=s},beforeEnter:function(t){t.style.transform="translate3d(0,".concat(37+this.elBottom-this.windowHeight,"px,0)"),t.children[0].style.transform="translate3d(".concat(this.elLeft-30,"px,0,0)"),t.children[0].style.opacity=0},afterEnter:function(t){var e=this;t.style.transform="translate3d(0,0,0)",t.children[0].style.transform="translate3d(0,0,0)",t.style.transition="transform .55s cubic-bezier(0.3, -0.25, 0.7, -0.15)",t.children[0].style.transition="transform .55s linear",this.showMoveDot=this.showMoveDot.map((function(t){return!1})),t.children[0].style.opacity=1,t.children[0].addEventListener("transitionend",(function(){e.listenInCart()})),t.children[0].addEventListener("webkitAnimationEnd",(function(){e.listenInCart()}))}}),watch:{showLoading:function(t){var e=this;t||this.$nextTick((function(){e.getFoodListHeight(),e.initCategoryNum()}))},shopCart:function(t){this.initCategoryNum()},cartFoodList:function(t){t.length||(this.showCartList=!1)},changeShowType:function(t){var e=this;"rating"===t&&this.$nextTick((function(){e.ratingScroll=new _["a"]("#ratingContainer",{probeType:3,deceleration:.003,bounce:!1,swipeTime:2e3,click:!0}),e.ratingScroll.on("scroll",(function(t){Math.abs(Math.round(t.y))>=Math.abs(Math.round(e.ratingScroll.maxScrollY))&&(e.loaderMoreRating(),e.ratingScroll.refresh())}))}))}}},f=p,m=(s("6ab1"),s("2877")),g=Object(m["a"])(f,i,o,!1,null,"6b28d630",null);e["default"]=g.exports},"319f":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"cart_module"},[t.foods.specifications.length?s("section",{staticClass:"choose_specification"},[s("section",{staticClass:"choose_icon_container"},[t.foodNum?s("el-button",{staticClass:"specs_reduce_icon",attrs:{type:"primary"},on:{click:t.showReduceTip}},[t._v("-")]):t._e(),t.foodNum?s("span",{staticClass:"cart_num"},[t._v("已选数量："+t._s(t.foodNum))]):t._e(),s("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.showChooseList(t.foods)}}},[t._v("选规格")])],1)]):s("section",{staticClass:"cart_button"},[t.foodNum?s("span",{on:{click:function(e){return t.removeOutCart(t.foods.category_id,t.foods.item_id,t.foods.specfoods[0].food_id,t.foods.specfoods[0].name,t.foods.specfoods[0].price,"",t.foods.specfoods[0].packing_fee,t.foods.specfoods[0].sku_id,t.foods.specfoods[0].stock)}}},[s("i",{staticClass:"el-icon-remove"})]):t._e(),t.foodNum?s("span",{staticClass:"cart_num"},[t._v(t._s(t.foodNum))]):t._e(),s("i",{staticClass:"el-icon-circle-plus",on:{click:function(e){return t.addToCart(t.foods.category_id,t.foods.item_id,t.foods.specfoods[0].food_id,t.foods.specfoods[0].name,t.foods.specfoods[0].price,"",t.foods.specfoods[0].packing_fee,t.foods.specfoods[0].sku_id,t.foods.specfoods[0].stock,e)}}})])])},o=[],a=(s("4160"),s("07ac"),s("159b"),s("5530")),n=s("2f62"),r={data:function(){return{showMoveDot:[]}},computed:Object(a["a"])({},Object(n["d"])(["cartList"]),{shopCart:function(){return Object.assign({},this.cartList[this.shopId])},foodNum:function(){var t=this.foods.category_id,e=this.foods.item_id;if(this.shopCart&&this.shopCart[t]&&this.shopCart[t][e]){var s=0;return Object.values(this.shopCart[t][e]).forEach((function(t,e){s+=t.num})),s}return 0}}),props:["foods","shopId"],methods:Object(a["a"])({},Object(n["c"])(["ADD_CART","REDUCE_CART"]),{removeOutCart:function(t,e,s,i,o,a,n,r,c){this.foodNum>0&&this.REDUCE_CART({shopid:this.shopId,category_id:t,item_id:e,food_id:s,name:i,price:o,specs:a,packing_fee:n,sku_id:r,stock:c})},addToCart:function(t,e,s,i,o,a,n,r,c,l){this.ADD_CART({shopid:this.shopId,category_id:t,item_id:e,food_id:s,name:i,price:o,specs:a,packing_fee:n,sku_id:r,stock:c});var d=l.target.getBoundingClientRect().left,u=l.target.getBoundingClientRect().bottom;this.showMoveDot.push(!0),this.$emit("showMoveDot",this.showMoveDot,d,u)},showChooseList:function(t){this.$emit("showChooseList",t)},showReduceTip:function(){this.$emit("showReduceTip")}})},c=r,l=(s("0ab0"),s("2877")),d=Object(l["a"])(c,i,o,!1,null,"65f6304b",null);e["a"]=d.exports},"408a":function(t,e,s){var i=s("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=i(t))throw TypeError("Incorrect invocation");return+t}},"6ab1":function(t,e,s){"use strict";var i=s("89ce"),o=s.n(i);o.a},"6d7a":function(t,e,s){},"6f53":function(t,e,s){var i=s("83ab"),o=s("df75"),a=s("fc6a"),n=s("d1e7").f,r=function(t){return function(e){var s,r=a(e),c=o(r),l=c.length,d=0,u=[];while(l>d)s=c[d++],i&&!n.call(r,s)||u.push(t?[s,r[s]]:r[s]);return u}};t.exports={entries:r(!0),values:r(!1)}},"89ce":function(t,e,s){},b680:function(t,e,s){"use strict";var i=s("23e7"),o=s("a691"),a=s("408a"),n=s("1148"),r=s("d039"),c=1..toFixed,l=Math.floor,d=function(t,e,s){return 0===e?s:e%2===1?d(t,e-1,s*t):d(t*t,e/2,s)},u=function(t){var e=0,s=t;while(s>=4096)e+=12,s/=4096;while(s>=2)e+=1,s/=2;return e},h=c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r((function(){c.call({})}));i({target:"Number",proto:!0,forced:h},{toFixed:function(t){var e,s,i,r,c=a(this),h=o(t),_=[0,0,0,0,0,0],p="",f="0",m=function(t,e){var s=-1,i=e;while(++s<6)i+=t*_[s],_[s]=i%1e7,i=l(i/1e7)},g=function(t){var e=6,s=0;while(--e>=0)s+=_[e],_[e]=l(s/t),s=s%t*1e7},v=function(){var t=6,e="";while(--t>=0)if(""!==e||0===t||0!==_[t]){var s=String(_[t]);e=""===e?s:e+n.call("0",7-s.length)+s}return e};if(h<0||h>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(p="-",c=-c),c>1e-21)if(e=u(c*d(2,69,1))-69,s=e<0?c*d(2,-e,1):c/d(2,e,1),s*=4503599627370496,e=52-e,e>0){m(0,s),i=h;while(i>=7)m(1e7,0),i-=7;m(d(10,i,1),0),i=e-1;while(i>=23)g(1<<23),i-=23;g(1<<i),m(1,1),g(2),f=v()}else m(0,s),m(1<<-e,0),f=v()+n.call("0",h);return h>0?(r=f.length,f=p+(r<=h?"0."+n.call("0",h-r)+f:f.slice(0,r-h)+"."+f.slice(r-h))):f=p+f,f}})},bf93:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"loading_container"},[s("div",{staticClass:"load_img",style:{backgroundPositionY:-t.positionY%7*2.5+"rem"}})])},o=[],a={data:function(){return{positionY:0,timer:null}},mounted:function(){var t=this;this.timer=setInterval((function(){t.positionY++}),600)},beforeDestroy:function(){clearInterval(this.timer)}},n=a,r=(s("ef94"),s("2877")),c=Object(r["a"])(n,i,o,!1,null,"4795715c",null);e["a"]=c.exports},c51e:function(t,e,s){},d81d:function(t,e,s){"use strict";var i=s("23e7"),o=s("b727").map,a=s("1dde"),n=s("ae40"),r=a("map"),c=n("map");i({target:"Array",proto:!0,forced:!r||!c},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},ef94:function(t,e,s){"use strict";var i=s("c51e"),o=s.n(i);o.a}}]);
//# sourceMappingURL=shop.0c0374e5.js.map