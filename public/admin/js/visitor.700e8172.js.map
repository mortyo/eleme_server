{"version":3,"sources":["webpack:///./src/components/visitorPie.vue?d361","webpack:///./node_modules/echarts/lib/chart/pie/PieView.js","webpack:///./node_modules/echarts/lib/chart/pie/pieLayout.js","webpack:///./src/page/visitor.vue?f775","webpack:///./node_modules/echarts/lib/component/helper/selectableMixin.js","webpack:///./node_modules/echarts/lib/action/createDataSelectAction.js","webpack:///./node_modules/echarts/lib/visual/dataColor.js","webpack:///./node_modules/echarts/lib/chart/pie/labelLayout.js","webpack:///./node_modules/echarts/lib/chart/pie.js","webpack:///./node_modules/echarts/lib/visual/LegendVisualProvider.js","webpack:///./src/page/visitor.vue?27be","webpack:///./src/components/visitorPie.vue?babb","webpack:///src/components/visitorPie.vue","webpack:///./src/components/visitorPie.vue?190f","webpack:///./src/components/visitorPie.vue","webpack:///src/page/visitor.vue","webpack:///./src/page/visitor.vue?8294","webpack:///./src/page/visitor.vue","webpack:///./node_modules/echarts/lib/processor/dataFilter.js","webpack:///./node_modules/echarts/lib/chart/helper/createListSimply.js","webpack:///./node_modules/echarts/lib/chart/pie/PieSeries.js"],"names":["zrUtil","graphic","ChartView","updateDataSelected","uid","seriesModel","hasAnimation","api","data","getData","dataIndex","this","name","getName","selectedOffset","get","dispatchAction","type","from","seriesId","id","each","idx","toggleItemSelected","getItemGraphicEl","getItemLayout","isSelected","el","layout","midAngle","startAngle","endAngle","dx","Math","cos","dy","sin","offset","position","animate","when","start","attr","PiePiece","Group","call","sector","Sector","z2","polyline","Polyline","text","Text","add","updateData","piePieceProto","prototype","firstCreate","childAt","labelLine","labelText","hostModel","itemModel","getItemModel","sectorShape","extend","label","animationTypeUpdate","getShallow","setShape","animationType","shape","r","r0","initProps","updateProps","visualColor","getItemVisual","useStyle","defaults","lineJoin","fill","getModel","getItemStyle","hoverStyle","cursorStyle","withAnimation","_updateLabel","highDownOnUpdate","isAnimationEnabled","fromState","toState","ignore","hoverIgnore","stopAnimation","animateTo","normalIgnore","setHoverStyle","labelLayout","isNaN","x","y","targetLineShape","points","linePoints","targetTextStyle","style","rotation","origin","labelModel","labelHoverModel","labelLineModel","labelLineHoverModel","setLabelStyle","labelFetcher","labelDataIndex","defaultText","autoColor","useInsideStyle","inside","textAlign","textVerticalAlign","verticalAlign","opacity","setStyle","stroke","getLineStyle","smooth","inherits","PieView","init","sectorGroup","_sectorGroup","render","ecModel","payload","oldData","_data","group","isFirstRender","onSectorClick","curry","selectedMode","diff","piePiece","eachChild","child","on","setItemGraphicEl","update","newIdx","oldIdx","off","remove","execute","count","s","max","getWidth","getHeight","removeClipPath","bind","setClipPath","_createClipPath","cx","cy","clockwise","dispose","cb","clipPath","initOrUpdate","PI","containPoint","point","itemLayout","radius","sqrt","_default","module","exports","_number","parsePercent","linearMap","PI2","RADIAN","getViewRect","getLayoutRect","getBoxLayoutParams","width","height","seriesType","eachSeriesByType","valueDim","mapDimension","viewRect","center","isArray","size","min","minAngle","validDataCount","value","sum","getSum","unitRadian","roseType","stillShowZeroSum","extent","getDataExtent","restAngle","valueSumLargerThanMinAngle","currentAngle","dir","angle","setItemLayout","NaN","updateSelectedMap","targetList","_targetList","slice","_selectTargetMap","reduce","targetMap","target","set","createHashMap","select","selected","unSelect","toggleSelected","echarts","actionInfos","actionInfo","registerAction","eachComponent","mainType","subType","query","method","_util","getTargetSeries","paletteScope","seiresModelMap","__paletteScope","reset","dataAll","getRawData","idxMap","rawIdx","getRawIndex","filteredIdx","singleDataColor","singleDataBorderColor","color","getColorFromPalette","setItemVisual","borderColor","textContain","adjustSingleSide","list","viewWidth","viewHeight","viewLeft","viewTop","farthestX","shiftDown","end","delta","j","shiftUp","changeX","isDownList","lastDeltaX","Number","MAX_VALUE","i","l","length","labelAlignTo","deltaY","abs","len","length2","len2","deltaX","sort","a","b","lastY","upList","downList","push","avoidOverlap","labelLayoutList","leftList","rightList","leftmostX","rightmostX","isPositionCenter","targetTextWidth","isAlignToEdge","realTextWidth","textRect","labelDistance","labelMargin","bleedMargin","truncateText","font","dist","hasLabelRotate","minShowLabelRadian","labelPosition","getFont","labelLineLen","labelLineLen2","textX","textY","labelRotate","getFormattedLabel","getBoundingRect","isLabelInside","x1","y1","x2","y2","x3","y3","rotate","createDataSelectAction","dataColor","pieLayout","dataFilter","event","registerVisual","registerLayout","registerProcessor","LegendVisualProvider","getDataWithEncodedVisual","getAllNames","rawData","mapArray","containName","indexOfName","dataWithEncodedVisual","key","_vm","_h","$createElement","_c","_self","attrs","pieData","staticRenderFns","_m","staticClass","staticStyle","component","legendModels","findComponents","filterSelf","createDimensions","List","opt","nameList","coordDimensions","source","getSource","dimensionsInfo","initData","createListSimply","modelUtil","getPercentWithPrecision","dataSelectableMixin","_dataProvider","retrieveRawAttr","_sourceHelper","makeSeriesEncodeForNameBased","PieSeries","extendSeriesModel","option","superApply","arguments","legendVisualProvider","_createSelectableList","_defaultLabelLine","mergeOption","newOption","superCall","getInitialData","encodeDefaulter","getDataParams","params","valueList","percent","$vars","defaultEmphasis","labelLineNormalOpt","labelLineEmphasisOpt","emphasis","show","defaultOption","zlevel","z","legendHoverLink","hoverAnimation","minShowLabelAngle","hoverOffset","avoidLabelOverlap","percentPrecision","left","top","right","bottom","alignTo","margin","distanceToLabelLine","lineStyle","itemStyle","borderWidth","animationEasing","mixin"],"mappings":"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","file":"js/visitor.700e8172.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./visitorPie.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./visitorPie.vue?vue&type=style&index=0&lang=less&\"","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar ChartView = require(\"../../view/Chart\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @param {module:echarts/model/Series} seriesModel\n * @param {boolean} hasAnimation\n * @inner\n */\nfunction updateDataSelected(uid, seriesModel, hasAnimation, api) {\n  var data = seriesModel.getData();\n  var dataIndex = this.dataIndex;\n  var name = data.getName(dataIndex);\n  var selectedOffset = seriesModel.get('selectedOffset');\n  api.dispatchAction({\n    type: 'pieToggleSelect',\n    from: uid,\n    name: name,\n    seriesId: seriesModel.id\n  });\n  data.each(function (idx) {\n    toggleItemSelected(data.getItemGraphicEl(idx), data.getItemLayout(idx), seriesModel.isSelected(data.getName(idx)), selectedOffset, hasAnimation);\n  });\n}\n/**\n * @param {module:zrender/graphic/Sector} el\n * @param {Object} layout\n * @param {boolean} isSelected\n * @param {number} selectedOffset\n * @param {boolean} hasAnimation\n * @inner\n */\n\n\nfunction toggleItemSelected(el, layout, isSelected, selectedOffset, hasAnimation) {\n  var midAngle = (layout.startAngle + layout.endAngle) / 2;\n  var dx = Math.cos(midAngle);\n  var dy = Math.sin(midAngle);\n  var offset = isSelected ? selectedOffset : 0;\n  var position = [dx * offset, dy * offset];\n  hasAnimation // animateTo will stop revious animation like update transition\n  ? el.animate().when(200, {\n    position: position\n  }).start('bounceOut') : el.attr('position', position);\n}\n/**\n * Piece of pie including Sector, Label, LabelLine\n * @constructor\n * @extends {module:zrender/graphic/Group}\n */\n\n\nfunction PiePiece(data, idx) {\n  graphic.Group.call(this);\n  var sector = new graphic.Sector({\n    z2: 2\n  });\n  var polyline = new graphic.Polyline();\n  var text = new graphic.Text();\n  this.add(sector);\n  this.add(polyline);\n  this.add(text);\n  this.updateData(data, idx, true);\n}\n\nvar piePieceProto = PiePiece.prototype;\n\npiePieceProto.updateData = function (data, idx, firstCreate) {\n  var sector = this.childAt(0);\n  var labelLine = this.childAt(1);\n  var labelText = this.childAt(2);\n  var seriesModel = data.hostModel;\n  var itemModel = data.getItemModel(idx);\n  var layout = data.getItemLayout(idx);\n  var sectorShape = zrUtil.extend({}, layout);\n  sectorShape.label = null;\n  var animationTypeUpdate = seriesModel.getShallow('animationTypeUpdate');\n\n  if (firstCreate) {\n    sector.setShape(sectorShape);\n    var animationType = seriesModel.getShallow('animationType');\n\n    if (animationType === 'scale') {\n      sector.shape.r = layout.r0;\n      graphic.initProps(sector, {\n        shape: {\n          r: layout.r\n        }\n      }, seriesModel, idx);\n    } // Expansion\n    else {\n        sector.shape.endAngle = layout.startAngle;\n        graphic.updateProps(sector, {\n          shape: {\n            endAngle: layout.endAngle\n          }\n        }, seriesModel, idx);\n      }\n  } else {\n    if (animationTypeUpdate === 'expansion') {\n      // Sectors are set to be target shape and an overlaying clipPath is used for animation\n      sector.setShape(sectorShape);\n    } else {\n      // Transition animation from the old shape\n      graphic.updateProps(sector, {\n        shape: sectorShape\n      }, seriesModel, idx);\n    }\n  } // Update common style\n\n\n  var visualColor = data.getItemVisual(idx, 'color');\n  sector.useStyle(zrUtil.defaults({\n    lineJoin: 'bevel',\n    fill: visualColor\n  }, itemModel.getModel('itemStyle').getItemStyle()));\n  sector.hoverStyle = itemModel.getModel('emphasis.itemStyle').getItemStyle();\n  var cursorStyle = itemModel.getShallow('cursor');\n  cursorStyle && sector.attr('cursor', cursorStyle); // Toggle selected\n\n  toggleItemSelected(this, data.getItemLayout(idx), seriesModel.isSelected(data.getName(idx)), seriesModel.get('selectedOffset'), seriesModel.get('animation')); // Label and text animation should be applied only for transition type animation when update\n\n  var withAnimation = !firstCreate && animationTypeUpdate === 'transition';\n\n  this._updateLabel(data, idx, withAnimation);\n\n  this.highDownOnUpdate = itemModel.get('hoverAnimation') && seriesModel.isAnimationEnabled() ? function (fromState, toState) {\n    if (toState === 'emphasis') {\n      labelLine.ignore = labelLine.hoverIgnore;\n      labelText.ignore = labelText.hoverIgnore; // Sector may has animation of updating data. Force to move to the last frame\n      // Or it may stopped on the wrong shape\n\n      sector.stopAnimation(true);\n      sector.animateTo({\n        shape: {\n          r: layout.r + seriesModel.get('hoverOffset')\n        }\n      }, 300, 'elasticOut');\n    } else {\n      labelLine.ignore = labelLine.normalIgnore;\n      labelText.ignore = labelText.normalIgnore;\n      sector.stopAnimation(true);\n      sector.animateTo({\n        shape: {\n          r: layout.r\n        }\n      }, 300, 'elasticOut');\n    }\n  } : null;\n  graphic.setHoverStyle(this);\n};\n\npiePieceProto._updateLabel = function (data, idx, withAnimation) {\n  var labelLine = this.childAt(1);\n  var labelText = this.childAt(2);\n  var seriesModel = data.hostModel;\n  var itemModel = data.getItemModel(idx);\n  var layout = data.getItemLayout(idx);\n  var labelLayout = layout.label;\n  var visualColor = data.getItemVisual(idx, 'color');\n\n  if (!labelLayout || isNaN(labelLayout.x) || isNaN(labelLayout.y)) {\n    labelText.ignore = labelText.normalIgnore = labelText.hoverIgnore = labelLine.ignore = labelLine.normalIgnore = labelLine.hoverIgnore = true;\n    return;\n  }\n\n  var targetLineShape = {\n    points: labelLayout.linePoints || [[labelLayout.x, labelLayout.y], [labelLayout.x, labelLayout.y], [labelLayout.x, labelLayout.y]]\n  };\n  var targetTextStyle = {\n    x: labelLayout.x,\n    y: labelLayout.y\n  };\n\n  if (withAnimation) {\n    graphic.updateProps(labelLine, {\n      shape: targetLineShape\n    }, seriesModel, idx);\n    graphic.updateProps(labelText, {\n      style: targetTextStyle\n    }, seriesModel, idx);\n  } else {\n    labelLine.attr({\n      shape: targetLineShape\n    });\n    labelText.attr({\n      style: targetTextStyle\n    });\n  }\n\n  labelText.attr({\n    rotation: labelLayout.rotation,\n    origin: [labelLayout.x, labelLayout.y],\n    z2: 10\n  });\n  var labelModel = itemModel.getModel('label');\n  var labelHoverModel = itemModel.getModel('emphasis.label');\n  var labelLineModel = itemModel.getModel('labelLine');\n  var labelLineHoverModel = itemModel.getModel('emphasis.labelLine');\n  var visualColor = data.getItemVisual(idx, 'color');\n  graphic.setLabelStyle(labelText.style, labelText.hoverStyle = {}, labelModel, labelHoverModel, {\n    labelFetcher: data.hostModel,\n    labelDataIndex: idx,\n    defaultText: labelLayout.text,\n    autoColor: visualColor,\n    useInsideStyle: !!labelLayout.inside\n  }, {\n    textAlign: labelLayout.textAlign,\n    textVerticalAlign: labelLayout.verticalAlign,\n    opacity: data.getItemVisual(idx, 'opacity')\n  });\n  labelText.ignore = labelText.normalIgnore = !labelModel.get('show');\n  labelText.hoverIgnore = !labelHoverModel.get('show');\n  labelLine.ignore = labelLine.normalIgnore = !labelLineModel.get('show');\n  labelLine.hoverIgnore = !labelLineHoverModel.get('show'); // Default use item visual color\n\n  labelLine.setStyle({\n    stroke: visualColor,\n    opacity: data.getItemVisual(idx, 'opacity')\n  });\n  labelLine.setStyle(labelLineModel.getModel('lineStyle').getLineStyle());\n  labelLine.hoverStyle = labelLineHoverModel.getModel('lineStyle').getLineStyle();\n  var smooth = labelLineModel.get('smooth');\n\n  if (smooth && smooth === true) {\n    smooth = 0.4;\n  }\n\n  labelLine.setShape({\n    smooth: smooth\n  });\n};\n\nzrUtil.inherits(PiePiece, graphic.Group); // Pie view\n\nvar PieView = ChartView.extend({\n  type: 'pie',\n  init: function () {\n    var sectorGroup = new graphic.Group();\n    this._sectorGroup = sectorGroup;\n  },\n  render: function (seriesModel, ecModel, api, payload) {\n    if (payload && payload.from === this.uid) {\n      return;\n    }\n\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var group = this.group;\n    var hasAnimation = ecModel.get('animation');\n    var isFirstRender = !oldData;\n    var animationType = seriesModel.get('animationType');\n    var animationTypeUpdate = seriesModel.get('animationTypeUpdate');\n    var onSectorClick = zrUtil.curry(updateDataSelected, this.uid, seriesModel, hasAnimation, api);\n    var selectedMode = seriesModel.get('selectedMode');\n    data.diff(oldData).add(function (idx) {\n      var piePiece = new PiePiece(data, idx); // Default expansion animation\n\n      if (isFirstRender && animationType !== 'scale') {\n        piePiece.eachChild(function (child) {\n          child.stopAnimation(true);\n        });\n      }\n\n      selectedMode && piePiece.on('click', onSectorClick);\n      data.setItemGraphicEl(idx, piePiece);\n      group.add(piePiece);\n    }).update(function (newIdx, oldIdx) {\n      var piePiece = oldData.getItemGraphicEl(oldIdx);\n\n      if (!isFirstRender && animationTypeUpdate !== 'transition') {\n        piePiece.eachChild(function (child) {\n          child.stopAnimation(true);\n        });\n      }\n\n      piePiece.updateData(data, newIdx);\n      piePiece.off('click');\n      selectedMode && piePiece.on('click', onSectorClick);\n      group.add(piePiece);\n      data.setItemGraphicEl(newIdx, piePiece);\n    }).remove(function (idx) {\n      var piePiece = oldData.getItemGraphicEl(idx);\n      group.remove(piePiece);\n    }).execute();\n\n    if (hasAnimation && data.count() > 0 && (isFirstRender ? animationType !== 'scale' : animationTypeUpdate !== 'transition')) {\n      var shape = data.getItemLayout(0);\n\n      for (var s = 1; isNaN(shape.startAngle) && s < data.count(); ++s) {\n        shape = data.getItemLayout(s);\n      }\n\n      var r = Math.max(api.getWidth(), api.getHeight()) / 2;\n      var removeClipPath = zrUtil.bind(group.removeClipPath, group);\n      group.setClipPath(this._createClipPath(shape.cx, shape.cy, r, shape.startAngle, shape.clockwise, removeClipPath, seriesModel, isFirstRender));\n    } else {\n      // clipPath is used in first-time animation, so remove it when otherwise. See: #8994\n      group.removeClipPath();\n    }\n\n    this._data = data;\n  },\n  dispose: function () {},\n  _createClipPath: function (cx, cy, r, startAngle, clockwise, cb, seriesModel, isFirstRender) {\n    var clipPath = new graphic.Sector({\n      shape: {\n        cx: cx,\n        cy: cy,\n        r0: 0,\n        r: r,\n        startAngle: startAngle,\n        endAngle: startAngle,\n        clockwise: clockwise\n      }\n    });\n    var initOrUpdate = isFirstRender ? graphic.initProps : graphic.updateProps;\n    initOrUpdate(clipPath, {\n      shape: {\n        endAngle: startAngle + (clockwise ? 1 : -1) * Math.PI * 2\n      }\n    }, seriesModel, cb);\n    return clipPath;\n  },\n\n  /**\n   * @implement\n   */\n  containPoint: function (point, seriesModel) {\n    var data = seriesModel.getData();\n    var itemLayout = data.getItemLayout(0);\n\n    if (itemLayout) {\n      var dx = point[0] - itemLayout.cx;\n      var dy = point[1] - itemLayout.cy;\n      var radius = Math.sqrt(dx * dx + dy * dy);\n      return radius <= itemLayout.r && radius >= itemLayout.r0;\n    }\n  }\n});\nvar _default = PieView;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _number = require(\"../../util/number\");\n\nvar parsePercent = _number.parsePercent;\nvar linearMap = _number.linearMap;\n\nvar layout = require(\"../../util/layout\");\n\nvar labelLayout = require(\"./labelLayout\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar PI2 = Math.PI * 2;\nvar RADIAN = Math.PI / 180;\n\nfunction getViewRect(seriesModel, api) {\n  return layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n}\n\nfunction _default(seriesType, ecModel, api, payload) {\n  ecModel.eachSeriesByType(seriesType, function (seriesModel) {\n    var data = seriesModel.getData();\n    var valueDim = data.mapDimension('value');\n    var viewRect = getViewRect(seriesModel, api);\n    var center = seriesModel.get('center');\n    var radius = seriesModel.get('radius');\n\n    if (!zrUtil.isArray(radius)) {\n      radius = [0, radius];\n    }\n\n    if (!zrUtil.isArray(center)) {\n      center = [center, center];\n    }\n\n    var width = parsePercent(viewRect.width, api.getWidth());\n    var height = parsePercent(viewRect.height, api.getHeight());\n    var size = Math.min(width, height);\n    var cx = parsePercent(center[0], width) + viewRect.x;\n    var cy = parsePercent(center[1], height) + viewRect.y;\n    var r0 = parsePercent(radius[0], size / 2);\n    var r = parsePercent(radius[1], size / 2);\n    var startAngle = -seriesModel.get('startAngle') * RADIAN;\n    var minAngle = seriesModel.get('minAngle') * RADIAN;\n    var validDataCount = 0;\n    data.each(valueDim, function (value) {\n      !isNaN(value) && validDataCount++;\n    });\n    var sum = data.getSum(valueDim); // Sum may be 0\n\n    var unitRadian = Math.PI / (sum || validDataCount) * 2;\n    var clockwise = seriesModel.get('clockwise');\n    var roseType = seriesModel.get('roseType');\n    var stillShowZeroSum = seriesModel.get('stillShowZeroSum'); // [0...max]\n\n    var extent = data.getDataExtent(valueDim);\n    extent[0] = 0; // In the case some sector angle is smaller than minAngle\n\n    var restAngle = PI2;\n    var valueSumLargerThanMinAngle = 0;\n    var currentAngle = startAngle;\n    var dir = clockwise ? 1 : -1;\n    data.each(valueDim, function (value, idx) {\n      var angle;\n\n      if (isNaN(value)) {\n        data.setItemLayout(idx, {\n          angle: NaN,\n          startAngle: NaN,\n          endAngle: NaN,\n          clockwise: clockwise,\n          cx: cx,\n          cy: cy,\n          r0: r0,\n          r: roseType ? NaN : r,\n          viewRect: viewRect\n        });\n        return;\n      } // FIXME 兼容 2.0 但是 roseType 是 area 的时候才是这样？\n\n\n      if (roseType !== 'area') {\n        angle = sum === 0 && stillShowZeroSum ? unitRadian : value * unitRadian;\n      } else {\n        angle = PI2 / validDataCount;\n      }\n\n      if (angle < minAngle) {\n        angle = minAngle;\n        restAngle -= minAngle;\n      } else {\n        valueSumLargerThanMinAngle += value;\n      }\n\n      var endAngle = currentAngle + dir * angle;\n      data.setItemLayout(idx, {\n        angle: angle,\n        startAngle: currentAngle,\n        endAngle: endAngle,\n        clockwise: clockwise,\n        cx: cx,\n        cy: cy,\n        r0: r0,\n        r: roseType ? linearMap(value, extent, [r0, r]) : r,\n        viewRect: viewRect\n      });\n      currentAngle = endAngle;\n    }); // Some sector is constrained by minAngle\n    // Rest sectors needs recalculate angle\n\n    if (restAngle < PI2 && validDataCount) {\n      // Average the angle if rest angle is not enough after all angles is\n      // Constrained by minAngle\n      if (restAngle <= 1e-3) {\n        var angle = PI2 / validDataCount;\n        data.each(valueDim, function (value, idx) {\n          if (!isNaN(value)) {\n            var layout = data.getItemLayout(idx);\n            layout.angle = angle;\n            layout.startAngle = startAngle + dir * idx * angle;\n            layout.endAngle = startAngle + dir * (idx + 1) * angle;\n          }\n        });\n      } else {\n        unitRadian = restAngle / valueSumLargerThanMinAngle;\n        currentAngle = startAngle;\n        data.each(valueDim, function (value, idx) {\n          if (!isNaN(value)) {\n            var layout = data.getItemLayout(idx);\n            var angle = layout.angle === minAngle ? minAngle : value * unitRadian;\n            layout.startAngle = currentAngle;\n            layout.endAngle = currentAngle + dir * angle;\n            currentAngle += dir * angle;\n          }\n        });\n      }\n    }\n\n    labelLayout(seriesModel, r, viewRect.width, viewRect.height, viewRect.x, viewRect.y);\n  });\n}\n\nmodule.exports = _default;","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./visitor.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./visitor.vue?vue&type=style&index=0&lang=less&\"","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Data selectable mixin for chart series.\n * To eanble data select, option of series must have `selectedMode`.\n * And each data item will use `selected` to toggle itself selected status\n */\nvar _default = {\n  /**\n   * @param {Array.<Object>} targetList [{name, value, selected}, ...]\n   *        If targetList is an array, it should like [{name: ..., value: ...}, ...].\n   *        If targetList is a \"List\", it must have coordDim: 'value' dimension and name.\n   */\n  updateSelectedMap: function (targetList) {\n    this._targetList = zrUtil.isArray(targetList) ? targetList.slice() : [];\n    this._selectTargetMap = zrUtil.reduce(targetList || [], function (targetMap, target) {\n      targetMap.set(target.name, target);\n      return targetMap;\n    }, zrUtil.createHashMap());\n  },\n\n  /**\n   * Either name or id should be passed as input here.\n   * If both of them are defined, id is used.\n   *\n   * @param {string|undefined} name name of data\n   * @param {number|undefined} id dataIndex of data\n   */\n  // PENGING If selectedMode is null ?\n  select: function (name, id) {\n    var target = id != null ? this._targetList[id] : this._selectTargetMap.get(name);\n    var selectedMode = this.get('selectedMode');\n\n    if (selectedMode === 'single') {\n      this._selectTargetMap.each(function (target) {\n        target.selected = false;\n      });\n    }\n\n    target && (target.selected = true);\n  },\n\n  /**\n   * Either name or id should be passed as input here.\n   * If both of them are defined, id is used.\n   *\n   * @param {string|undefined} name name of data\n   * @param {number|undefined} id dataIndex of data\n   */\n  unSelect: function (name, id) {\n    var target = id != null ? this._targetList[id] : this._selectTargetMap.get(name); // var selectedMode = this.get('selectedMode');\n    // selectedMode !== 'single' && target && (target.selected = false);\n\n    target && (target.selected = false);\n  },\n\n  /**\n   * Either name or id should be passed as input here.\n   * If both of them are defined, id is used.\n   *\n   * @param {string|undefined} name name of data\n   * @param {number|undefined} id dataIndex of data\n   */\n  toggleSelected: function (name, id) {\n    var target = id != null ? this._targetList[id] : this._selectTargetMap.get(name);\n\n    if (target != null) {\n      this[target.selected ? 'unSelect' : 'select'](name, id);\n      return target.selected;\n    }\n  },\n\n  /**\n   * Either name or id should be passed as input here.\n   * If both of them are defined, id is used.\n   *\n   * @param {string|undefined} name name of data\n   * @param {number|undefined} id dataIndex of data\n   */\n  isSelected: function (name, id) {\n    var target = id != null ? this._targetList[id] : this._selectTargetMap.get(name);\n    return target && target.selected;\n  }\n};\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction _default(seriesType, actionInfos) {\n  zrUtil.each(actionInfos, function (actionInfo) {\n    actionInfo.update = 'updateView';\n    /**\n     * @payload\n     * @property {string} seriesName\n     * @property {string} name\n     */\n\n    echarts.registerAction(actionInfo, function (payload, ecModel) {\n      var selected = {};\n      ecModel.eachComponent({\n        mainType: 'series',\n        subType: seriesType,\n        query: payload\n      }, function (seriesModel) {\n        if (seriesModel[actionInfo.method]) {\n          seriesModel[actionInfo.method](payload.name, payload.dataIndex);\n        }\n\n        var data = seriesModel.getData(); // Create selected map\n\n        data.each(function (idx) {\n          var name = data.getName(idx);\n          selected[name] = seriesModel.isSelected(name) || false;\n        });\n      });\n      return {\n        name: payload.name,\n        selected: selected,\n        seriesId: payload.seriesId\n      };\n    });\n  });\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar createHashMap = _util.createHashMap;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Pick color from palette for each data item.\n// Applicable for charts that require applying color palette\n// in data level (like pie, funnel, chord).\nfunction _default(seriesType) {\n  return {\n    getTargetSeries: function (ecModel) {\n      // Pie and funnel may use diferrent scope\n      var paletteScope = {};\n      var seiresModelMap = createHashMap();\n      ecModel.eachSeriesByType(seriesType, function (seriesModel) {\n        seriesModel.__paletteScope = paletteScope;\n        seiresModelMap.set(seriesModel.uid, seriesModel);\n      });\n      return seiresModelMap;\n    },\n    reset: function (seriesModel, ecModel) {\n      var dataAll = seriesModel.getRawData();\n      var idxMap = {};\n      var data = seriesModel.getData();\n      data.each(function (idx) {\n        var rawIdx = data.getRawIndex(idx);\n        idxMap[rawIdx] = idx;\n      });\n      dataAll.each(function (rawIdx) {\n        var filteredIdx = idxMap[rawIdx]; // If series.itemStyle.normal.color is a function. itemVisual may be encoded\n\n        var singleDataColor = filteredIdx != null && data.getItemVisual(filteredIdx, 'color', true);\n        var singleDataBorderColor = filteredIdx != null && data.getItemVisual(filteredIdx, 'borderColor', true);\n        var itemModel;\n\n        if (!singleDataColor || !singleDataBorderColor) {\n          // FIXME Performance\n          itemModel = dataAll.getItemModel(rawIdx);\n        }\n\n        if (!singleDataColor) {\n          var color = itemModel.get('itemStyle.color') || seriesModel.getColorFromPalette(dataAll.getName(rawIdx) || rawIdx + '', seriesModel.__paletteScope, dataAll.count()); // Data is not filtered\n\n          if (filteredIdx != null) {\n            data.setItemVisual(filteredIdx, 'color', color);\n          }\n        }\n\n        if (!singleDataBorderColor) {\n          var borderColor = itemModel.get('itemStyle.borderColor'); // Data is not filtered\n\n          if (filteredIdx != null) {\n            data.setItemVisual(filteredIdx, 'borderColor', borderColor);\n          }\n        }\n      });\n    }\n  };\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar textContain = require(\"zrender/lib/contain/text\");\n\nvar _number = require(\"../../util/number\");\n\nvar parsePercent = _number.parsePercent;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// FIXME emphasis label position is not same with normal label position\nvar RADIAN = Math.PI / 180;\n\nfunction adjustSingleSide(list, cx, cy, r, dir, viewWidth, viewHeight, viewLeft, viewTop, farthestX) {\n  list.sort(function (a, b) {\n    return a.y - b.y;\n  });\n\n  function shiftDown(start, end, delta, dir) {\n    for (var j = start; j < end; j++) {\n      if (list[j].y + delta > viewTop + viewHeight) {\n        break;\n      }\n\n      list[j].y += delta;\n\n      if (j > start && j + 1 < end && list[j + 1].y > list[j].y + list[j].height) {\n        shiftUp(j, delta / 2);\n        return;\n      }\n    }\n\n    shiftUp(end - 1, delta / 2);\n  }\n\n  function shiftUp(end, delta) {\n    for (var j = end; j >= 0; j--) {\n      if (list[j].y - delta < viewTop) {\n        break;\n      }\n\n      list[j].y -= delta;\n\n      if (j > 0 && list[j].y > list[j - 1].y + list[j - 1].height) {\n        break;\n      }\n    }\n  }\n\n  function changeX(list, isDownList, cx, cy, r, dir) {\n    var lastDeltaX = dir > 0 ? isDownList // right-side\n    ? Number.MAX_VALUE // down\n    : 0 // up\n    : isDownList // left-side\n    ? Number.MAX_VALUE // down\n    : 0; // up\n\n    for (var i = 0, l = list.length; i < l; i++) {\n      if (list[i].labelAlignTo !== 'none') {\n        continue;\n      }\n\n      var deltaY = Math.abs(list[i].y - cy);\n      var length = list[i].len;\n      var length2 = list[i].len2;\n      var deltaX = deltaY < r + length ? Math.sqrt((r + length + length2) * (r + length + length2) - deltaY * deltaY) : Math.abs(list[i].x - cx);\n\n      if (isDownList && deltaX >= lastDeltaX) {\n        // right-down, left-down\n        deltaX = lastDeltaX - 10;\n      }\n\n      if (!isDownList && deltaX <= lastDeltaX) {\n        // right-up, left-up\n        deltaX = lastDeltaX + 10;\n      }\n\n      list[i].x = cx + deltaX * dir;\n      lastDeltaX = deltaX;\n    }\n  }\n\n  var lastY = 0;\n  var delta;\n  var len = list.length;\n  var upList = [];\n  var downList = [];\n\n  for (var i = 0; i < len; i++) {\n    if (list[i].position === 'outer' && list[i].labelAlignTo === 'labelLine') {\n      var dx = list[i].x - farthestX;\n      list[i].linePoints[1][0] += dx;\n      list[i].x = farthestX;\n    }\n\n    delta = list[i].y - lastY;\n\n    if (delta < 0) {\n      shiftDown(i, len, -delta, dir);\n    }\n\n    lastY = list[i].y + list[i].height;\n  }\n\n  if (viewHeight - lastY < 0) {\n    shiftUp(len - 1, lastY - viewHeight);\n  }\n\n  for (var i = 0; i < len; i++) {\n    if (list[i].y >= cy) {\n      downList.push(list[i]);\n    } else {\n      upList.push(list[i]);\n    }\n  }\n\n  changeX(upList, false, cx, cy, r, dir);\n  changeX(downList, true, cx, cy, r, dir);\n}\n\nfunction avoidOverlap(labelLayoutList, cx, cy, r, viewWidth, viewHeight, viewLeft, viewTop) {\n  var leftList = [];\n  var rightList = [];\n  var leftmostX = Number.MAX_VALUE;\n  var rightmostX = -Number.MAX_VALUE;\n\n  for (var i = 0; i < labelLayoutList.length; i++) {\n    if (isPositionCenter(labelLayoutList[i])) {\n      continue;\n    }\n\n    if (labelLayoutList[i].x < cx) {\n      leftmostX = Math.min(leftmostX, labelLayoutList[i].x);\n      leftList.push(labelLayoutList[i]);\n    } else {\n      rightmostX = Math.max(rightmostX, labelLayoutList[i].x);\n      rightList.push(labelLayoutList[i]);\n    }\n  }\n\n  adjustSingleSide(rightList, cx, cy, r, 1, viewWidth, viewHeight, viewLeft, viewTop, rightmostX);\n  adjustSingleSide(leftList, cx, cy, r, -1, viewWidth, viewHeight, viewLeft, viewTop, leftmostX);\n\n  for (var i = 0; i < labelLayoutList.length; i++) {\n    var layout = labelLayoutList[i];\n\n    if (isPositionCenter(layout)) {\n      continue;\n    }\n\n    var linePoints = layout.linePoints;\n\n    if (linePoints) {\n      var isAlignToEdge = layout.labelAlignTo === 'edge';\n      var realTextWidth = layout.textRect.width;\n      var targetTextWidth;\n\n      if (isAlignToEdge) {\n        if (layout.x < cx) {\n          targetTextWidth = linePoints[2][0] - layout.labelDistance - viewLeft - layout.labelMargin;\n        } else {\n          targetTextWidth = viewLeft + viewWidth - layout.labelMargin - linePoints[2][0] - layout.labelDistance;\n        }\n      } else {\n        if (layout.x < cx) {\n          targetTextWidth = layout.x - viewLeft - layout.bleedMargin;\n        } else {\n          targetTextWidth = viewLeft + viewWidth - layout.x - layout.bleedMargin;\n        }\n      }\n\n      if (targetTextWidth < layout.textRect.width) {\n        layout.text = textContain.truncateText(layout.text, targetTextWidth, layout.font);\n\n        if (layout.labelAlignTo === 'edge') {\n          realTextWidth = textContain.getWidth(layout.text, layout.font);\n        }\n      }\n\n      var dist = linePoints[1][0] - linePoints[2][0];\n\n      if (isAlignToEdge) {\n        if (layout.x < cx) {\n          linePoints[2][0] = viewLeft + layout.labelMargin + realTextWidth + layout.labelDistance;\n        } else {\n          linePoints[2][0] = viewLeft + viewWidth - layout.labelMargin - realTextWidth - layout.labelDistance;\n        }\n      } else {\n        if (layout.x < cx) {\n          linePoints[2][0] = layout.x + layout.labelDistance;\n        } else {\n          linePoints[2][0] = layout.x - layout.labelDistance;\n        }\n\n        linePoints[1][0] = linePoints[2][0] + dist;\n      }\n\n      linePoints[1][1] = linePoints[2][1] = layout.y;\n    }\n  }\n}\n\nfunction isPositionCenter(layout) {\n  // Not change x for center label\n  return layout.position === 'center';\n}\n\nfunction _default(seriesModel, r, viewWidth, viewHeight, viewLeft, viewTop) {\n  var data = seriesModel.getData();\n  var labelLayoutList = [];\n  var cx;\n  var cy;\n  var hasLabelRotate = false;\n  var minShowLabelRadian = (seriesModel.get('minShowLabelAngle') || 0) * RADIAN;\n  data.each(function (idx) {\n    var layout = data.getItemLayout(idx);\n    var itemModel = data.getItemModel(idx);\n    var labelModel = itemModel.getModel('label'); // Use position in normal or emphasis\n\n    var labelPosition = labelModel.get('position') || itemModel.get('emphasis.label.position');\n    var labelDistance = labelModel.get('distanceToLabelLine');\n    var labelAlignTo = labelModel.get('alignTo');\n    var labelMargin = parsePercent(labelModel.get('margin'), viewWidth);\n    var bleedMargin = labelModel.get('bleedMargin');\n    var font = labelModel.getFont();\n    var labelLineModel = itemModel.getModel('labelLine');\n    var labelLineLen = labelLineModel.get('length');\n    labelLineLen = parsePercent(labelLineLen, viewWidth);\n    var labelLineLen2 = labelLineModel.get('length2');\n    labelLineLen2 = parsePercent(labelLineLen2, viewWidth);\n\n    if (layout.angle < minShowLabelRadian) {\n      return;\n    }\n\n    var midAngle = (layout.startAngle + layout.endAngle) / 2;\n    var dx = Math.cos(midAngle);\n    var dy = Math.sin(midAngle);\n    var textX;\n    var textY;\n    var linePoints;\n    var textAlign;\n    cx = layout.cx;\n    cy = layout.cy;\n    var text = seriesModel.getFormattedLabel(idx, 'normal') || data.getName(idx);\n    var textRect = textContain.getBoundingRect(text, font, textAlign, 'top');\n    var isLabelInside = labelPosition === 'inside' || labelPosition === 'inner';\n\n    if (labelPosition === 'center') {\n      textX = layout.cx;\n      textY = layout.cy;\n      textAlign = 'center';\n    } else {\n      var x1 = (isLabelInside ? (layout.r + layout.r0) / 2 * dx : layout.r * dx) + cx;\n      var y1 = (isLabelInside ? (layout.r + layout.r0) / 2 * dy : layout.r * dy) + cy;\n      textX = x1 + dx * 3;\n      textY = y1 + dy * 3;\n\n      if (!isLabelInside) {\n        // For roseType\n        var x2 = x1 + dx * (labelLineLen + r - layout.r);\n        var y2 = y1 + dy * (labelLineLen + r - layout.r);\n        var x3 = x2 + (dx < 0 ? -1 : 1) * labelLineLen2;\n        var y3 = y2;\n\n        if (labelAlignTo === 'edge') {\n          // Adjust textX because text align of edge is opposite\n          textX = dx < 0 ? viewLeft + labelMargin : viewLeft + viewWidth - labelMargin;\n        } else {\n          textX = x3 + (dx < 0 ? -labelDistance : labelDistance);\n        }\n\n        textY = y3;\n        linePoints = [[x1, y1], [x2, y2], [x3, y3]];\n      }\n\n      textAlign = isLabelInside ? 'center' : labelAlignTo === 'edge' ? dx > 0 ? 'right' : 'left' : dx > 0 ? 'left' : 'right';\n    }\n\n    var labelRotate;\n    var rotate = labelModel.get('rotate');\n\n    if (typeof rotate === 'number') {\n      labelRotate = rotate * (Math.PI / 180);\n    } else {\n      labelRotate = rotate ? dx < 0 ? -midAngle + Math.PI : -midAngle : 0;\n    }\n\n    hasLabelRotate = !!labelRotate;\n    layout.label = {\n      x: textX,\n      y: textY,\n      position: labelPosition,\n      height: textRect.height,\n      len: labelLineLen,\n      len2: labelLineLen2,\n      linePoints: linePoints,\n      textAlign: textAlign,\n      verticalAlign: 'middle',\n      rotation: labelRotate,\n      inside: isLabelInside,\n      labelDistance: labelDistance,\n      labelAlignTo: labelAlignTo,\n      labelMargin: labelMargin,\n      bleedMargin: bleedMargin,\n      textRect: textRect,\n      text: text,\n      font: font\n    }; // Not layout the inside label\n\n    if (!isLabelInside) {\n      labelLayoutList.push(layout.label);\n    }\n  });\n\n  if (!hasLabelRotate && seriesModel.get('avoidLabelOverlap')) {\n    avoidOverlap(labelLayoutList, cx, cy, r, viewWidth, viewHeight, viewLeft, viewTop);\n  }\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nrequire(\"./pie/PieSeries\");\n\nrequire(\"./pie/PieView\");\n\nvar createDataSelectAction = require(\"../action/createDataSelectAction\");\n\nvar dataColor = require(\"../visual/dataColor\");\n\nvar pieLayout = require(\"./pie/pieLayout\");\n\nvar dataFilter = require(\"../processor/dataFilter\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\ncreateDataSelectAction('pie', [{\n  type: 'pieToggleSelect',\n  event: 'pieselectchanged',\n  method: 'toggleSelected'\n}, {\n  type: 'pieSelect',\n  event: 'pieselected',\n  method: 'select'\n}, {\n  type: 'pieUnSelect',\n  event: 'pieunselected',\n  method: 'unSelect'\n}]);\necharts.registerVisual(dataColor('pie'));\necharts.registerLayout(zrUtil.curry(pieLayout, 'pie'));\necharts.registerProcessor(dataFilter('pie'));","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * LegendVisualProvider is an bridge that pick encoded color from data and\n * provide to the legend component.\n * @param {Function} getDataWithEncodedVisual Function to get data after filtered. It stores all the encoding info\n * @param {Function} getRawData Function to get raw data before filtered.\n */\nfunction LegendVisualProvider(getDataWithEncodedVisual, getRawData) {\n  this.getAllNames = function () {\n    var rawData = getRawData(); // We find the name from the raw data. In case it's filtered by the legend component.\n    // Normally, the name can be found in rawData, but can't be found in filtered data will display as gray.\n\n    return rawData.mapArray(rawData.getName);\n  };\n\n  this.containName = function (name) {\n    var rawData = getRawData();\n    return rawData.indexOfName(name) >= 0;\n  };\n\n  this.indexOfName = function (name) {\n    // Only get data when necessary.\n    // Because LegendVisualProvider constructor may be new in the stage that data is not prepared yet.\n    // Invoking Series#getData immediately will throw an error.\n    var dataWithEncodedVisual = getDataWithEncodedVisual();\n    return dataWithEncodedVisual.indexOfName(name);\n  };\n\n  this.getItemVisual = function (dataIndex, key) {\n    // Get encoded visual properties from final filtered data.\n    var dataWithEncodedVisual = getDataWithEncodedVisual();\n    return dataWithEncodedVisual.getItemVisual(dataIndex, key);\n  };\n}\n\nvar _default = LegendVisualProvider;\nmodule.exports = _default;","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('head-top'),_c('visitor-pie',{attrs:{\"pieData\":_vm.pieData}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"visitorpie\"},[_c('div',{staticStyle:{\"width\":\"90%\",\"height\":\"450px\"},attrs:{\"id\":\"visitorpie\"}})])}]\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"visitorpie\">\r\n        <div id=\"visitorpie\" class=\"\" style=\"width: 90%;height:450px;\"></div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import echarts from 'echarts/lib/echarts';\r\n    // 引入柱状图\r\n    import 'echarts/lib/chart/pie';\r\n    import 'echarts/lib/component/title';\r\n    import 'echarts/lib/component/legend';\r\n    \r\n    export default {\r\n        mounted(){\r\n            this.myChart = echarts.init(document.getElementById('visitorpie'));\r\n            this.initData();\r\n        },\r\n        props: ['pieData'],\r\n        methods: {\r\n            initData(){\r\n                const option = {\r\n                    title : {\r\n                        text: '用户分布',\r\n                        subtext: '',\r\n                        x:'center'\r\n                    },\r\n                    tooltip : {\r\n                        trigger: 'item',\r\n                        formatter: \"{a} <br/>{b} : {c} ({d}%)\"\r\n                    },\r\n                    legend: {\r\n                        orient: 'vertical',\r\n                        left: 'left',\r\n                        data: ['北京','上海','深圳','杭州','其他']\r\n                    },\r\n                    series : [\r\n                        {\r\n                            name: '访问来源',\r\n                            type: 'pie',\r\n                            radius : '55%',\r\n                            center: ['50%', '60%'],\r\n                            data:[\r\n                                {value:this.pieData.beijing, name:'北京'},\r\n                                {value:this.pieData.shanghai, name:'上海'},\r\n                                {value:this.pieData.shenzhen, name:'深圳'},\r\n                                {value:this.pieData.hangzhou, name:'杭州'},\r\n                                {value:this.pieData.qita, name:'其他'}\r\n                            ],\r\n                            itemStyle: {\r\n                                emphasis: {\r\n                                    shadowBlur: 10,\r\n                                    shadowOffsetX: 0,\r\n                                    shadowColor: 'rgba(0, 0, 0, 0.5)'\r\n                                }\r\n                            }\r\n                        }\r\n                    ]\r\n                };\r\n\r\n                this.myChart.setOption(option);\r\n            }\r\n        },\r\n        watch: {\r\n            pieData: function (){\r\n                this.initData()\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style lang=\"less\">\r\n\t@import '../style/mixin';\r\n    .visitorpie{\r\n        display: flex;\r\n        justify-content: center;\r\n        margin-top: 20px;\r\n    }\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./visitorPie.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./visitorPie.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./visitorPie.vue?vue&type=template&id=d9e1aa44&\"\nimport script from \"./visitorPie.vue?vue&type=script&lang=js&\"\nexport * from \"./visitorPie.vue?vue&type=script&lang=js&\"\nimport style0 from \"./visitorPie.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n    <div>\n        <head-top></head-top>\n        <visitor-pie :pieData=\"pieData\"></visitor-pie>\n    </div>\n</template>\n\n<script>\n\timport headTop from '../components/headTop'\n    import visitorPie from '@/components/visitorPie'\n\timport {getUserCity} from '@/api/getData'\n    export default {\n    \tdata(){\n    \t\treturn {\n    \t\t\tpieData: {},\n    \t\t}\n    \t},\n    \tcomponents: {\n    \t\theadTop,\n            visitorPie,\n    \t},\n    \tmounted(){\n    \t\tthis.initData();\n    \t},\n    \tmethods: {\n    \t\tasync initData(){\n    \t\t\ttry{\n    \t\t\t\tconst res = await getUserCity().then(res=>{\n\t\t\t\t\t\treturn res.data\n\t\t\t\t\t});\n    \t\t\t\tif (res.status == 1) {\n    \t\t\t\t\tthis.pieData = res.user_city;\n    \t\t\t\t}else{\n    \t\t\t\t\tthrow new Error(res)\n    \t\t\t\t}\n    \t\t\t}catch(err){\n    \t\t\t\tconsole.log('获取用户分布信息失败',err);\n    \t\t\t}\n    \t\t},\n    \t}\n    }\n</script>\n\n<style lang=\"less\">\n\t@import '../style/mixin';\n\t\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./visitor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./visitor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./visitor.vue?vue&type=template&id=1da9d36b&\"\nimport script from \"./visitor.vue?vue&type=script&lang=js&\"\nexport * from \"./visitor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./visitor.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction _default(seriesType) {\n  return {\n    seriesType: seriesType,\n    reset: function (seriesModel, ecModel) {\n      var legendModels = ecModel.findComponents({\n        mainType: 'legend'\n      });\n\n      if (!legendModels || !legendModels.length) {\n        return;\n      }\n\n      var data = seriesModel.getData();\n      data.filterSelf(function (idx) {\n        var name = data.getName(idx); // If in any legend component the status is not selected.\n\n        for (var i = 0; i < legendModels.length; i++) {\n          if (!legendModels[i].isSelected(name)) {\n            return false;\n          }\n        }\n\n        return true;\n      });\n    }\n  };\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar createDimensions = require(\"../../data/helper/createDimensions\");\n\nvar List = require(\"../../data/List\");\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar extend = _util.extend;\nvar isArray = _util.isArray;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * [Usage]:\n * (1)\n * createListSimply(seriesModel, ['value']);\n * (2)\n * createListSimply(seriesModel, {\n *     coordDimensions: ['value'],\n *     dimensionsCount: 5\n * });\n *\n * @param {module:echarts/model/Series} seriesModel\n * @param {Object|Array.<string|Object>} opt opt or coordDimensions\n *        The options in opt, see `echarts/data/helper/createDimensions`\n * @param {Array.<string>} [nameList]\n * @return {module:echarts/data/List}\n */\nfunction _default(seriesModel, opt, nameList) {\n  opt = isArray(opt) && {\n    coordDimensions: opt\n  } || extend({}, opt);\n  var source = seriesModel.getSource();\n  var dimensionsInfo = createDimensions(source, opt);\n  var list = new List(dimensionsInfo, seriesModel);\n  list.initData(source, nameList);\n  return list;\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar createListSimply = require(\"../helper/createListSimply\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar modelUtil = require(\"../../util/model\");\n\nvar _number = require(\"../../util/number\");\n\nvar getPercentWithPrecision = _number.getPercentWithPrecision;\n\nvar dataSelectableMixin = require(\"../../component/helper/selectableMixin\");\n\nvar _dataProvider = require(\"../../data/helper/dataProvider\");\n\nvar retrieveRawAttr = _dataProvider.retrieveRawAttr;\n\nvar _sourceHelper = require(\"../../data/helper/sourceHelper\");\n\nvar makeSeriesEncodeForNameBased = _sourceHelper.makeSeriesEncodeForNameBased;\n\nvar LegendVisualProvider = require(\"../../visual/LegendVisualProvider\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar PieSeries = echarts.extendSeriesModel({\n  type: 'series.pie',\n  // Overwrite\n  init: function (option) {\n    PieSeries.superApply(this, 'init', arguments); // Enable legend selection for each data item\n    // Use a function instead of direct access because data reference may changed\n\n    this.legendVisualProvider = new LegendVisualProvider(zrUtil.bind(this.getData, this), zrUtil.bind(this.getRawData, this));\n    this.updateSelectedMap(this._createSelectableList());\n\n    this._defaultLabelLine(option);\n  },\n  // Overwrite\n  mergeOption: function (newOption) {\n    PieSeries.superCall(this, 'mergeOption', newOption);\n    this.updateSelectedMap(this._createSelectableList());\n  },\n  getInitialData: function (option, ecModel) {\n    return createListSimply(this, {\n      coordDimensions: ['value'],\n      encodeDefaulter: zrUtil.curry(makeSeriesEncodeForNameBased, this)\n    });\n  },\n  _createSelectableList: function () {\n    var data = this.getRawData();\n    var valueDim = data.mapDimension('value');\n    var targetList = [];\n\n    for (var i = 0, len = data.count(); i < len; i++) {\n      targetList.push({\n        name: data.getName(i),\n        value: data.get(valueDim, i),\n        selected: retrieveRawAttr(data, i, 'selected')\n      });\n    }\n\n    return targetList;\n  },\n  // Overwrite\n  getDataParams: function (dataIndex) {\n    var data = this.getData();\n    var params = PieSeries.superCall(this, 'getDataParams', dataIndex); // FIXME toFixed?\n\n    var valueList = [];\n    data.each(data.mapDimension('value'), function (value) {\n      valueList.push(value);\n    });\n    params.percent = getPercentWithPrecision(valueList, dataIndex, data.hostModel.get('percentPrecision'));\n    params.$vars.push('percent');\n    return params;\n  },\n  _defaultLabelLine: function (option) {\n    // Extend labelLine emphasis\n    modelUtil.defaultEmphasis(option, 'labelLine', ['show']);\n    var labelLineNormalOpt = option.labelLine;\n    var labelLineEmphasisOpt = option.emphasis.labelLine; // Not show label line if `label.normal.show = false`\n\n    labelLineNormalOpt.show = labelLineNormalOpt.show && option.label.show;\n    labelLineEmphasisOpt.show = labelLineEmphasisOpt.show && option.emphasis.label.show;\n  },\n  defaultOption: {\n    zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    hoverAnimation: true,\n    // 默认全局居中\n    center: ['50%', '50%'],\n    radius: [0, '75%'],\n    // 默认顺时针\n    clockwise: true,\n    startAngle: 90,\n    // 最小角度改为0\n    minAngle: 0,\n    // If the angle of a sector less than `minShowLabelAngle`,\n    // the label will not be displayed.\n    minShowLabelAngle: 0,\n    // 选中时扇区偏移量\n    selectedOffset: 10,\n    // 高亮扇区偏移量\n    hoverOffset: 10,\n    // If use strategy to avoid label overlapping\n    avoidLabelOverlap: true,\n    // 选择模式，默认关闭，可选single，multiple\n    // selectedMode: false,\n    // 南丁格尔玫瑰图模式，'radius'（半径） | 'area'（面积）\n    // roseType: null,\n    percentPrecision: 2,\n    // If still show when all data zero.\n    stillShowZeroSum: true,\n    // cursor: null,\n    left: 0,\n    top: 0,\n    right: 0,\n    bottom: 0,\n    width: null,\n    height: null,\n    label: {\n      // If rotate around circle\n      rotate: false,\n      show: true,\n      // 'outer', 'inside', 'center'\n      position: 'outer',\n      // 'none', 'labelLine', 'edge'. Works only when position is 'outer'\n      alignTo: 'none',\n      // Closest distance between label and chart edge.\n      // Works only position is 'outer' and alignTo is 'edge'.\n      margin: '25%',\n      // Works only position is 'outer' and alignTo is not 'edge'.\n      bleedMargin: 10,\n      // Distance between text and label line.\n      distanceToLabelLine: 5 // formatter: 标签文本格式器，同Tooltip.formatter，不支持异步回调\n      // 默认使用全局文本样式，详见TEXTSTYLE\n      // distance: 当position为inner时有效，为label位置到圆心的距离与圆半径(环状图为内外半径和)的比例系数\n\n    },\n    // Enabled when label.normal.position is 'outer'\n    labelLine: {\n      show: true,\n      // 引导线两段中的第一段长度\n      length: 15,\n      // 引导线两段中的第二段长度\n      length2: 15,\n      smooth: false,\n      lineStyle: {\n        // color: 各异,\n        width: 1,\n        type: 'solid'\n      }\n    },\n    itemStyle: {\n      borderWidth: 1\n    },\n    // Animation type. Valid values: expansion, scale\n    animationType: 'expansion',\n    // Animation type when update. Valid values: transition, expansion\n    animationTypeUpdate: 'transition',\n    animationEasing: 'cubicOut'\n  }\n});\nzrUtil.mixin(PieSeries, dataSelectableMixin);\nvar _default = PieSeries;\nmodule.exports = _default;"],"sourceRoot":""}