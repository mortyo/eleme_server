(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["addGoods"],{"15c6":function(e,t,r){},"1dde":function(e,t,r){var o=r("d039"),a=r("b622"),s=r("2d00"),n=a("species");e.exports=function(e){return s>=51||!o((function(){var t=[],r=t.constructor={};return r[n]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},2908:function(e,t,r){},"4de4":function(e,t,r){"use strict";var o=r("23e7"),a=r("b727").filter,s=r("1dde"),n=r("ae40"),i=s("filter"),c=n("filter");o({target:"Array",proto:!0,forced:!i||!c},{filter:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},5530:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));r("a4d3"),r("4de4"),r("4160"),r("e439"),r("dbb4"),r("b64b"),r("159b");function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,r){var o=r("1d80"),a=r("5899"),s="["+a+"]",n=RegExp("^"+s+s+"*"),i=RegExp(s+s+"*$"),c=function(e){return function(t){var r=String(o(t));return 1&e&&(r=r.replace(n,"")),2&e&&(r=r.replace(i,"")),r}};e.exports={start:c(1),end:c(2),trim:c(3)}},"6c92":function(e,t,r){"use strict";var o=r("15c6"),a=r.n(o);a.a},7156:function(e,t,r){var o=r("861d"),a=r("d2bb");e.exports=function(e,t,r){var s,n;return a&&"function"==typeof(s=t.constructor)&&s!==r&&o(n=s.prototype)&&n!==r.prototype&&a(e,n),e}},8418:function(e,t,r){"use strict";var o=r("c04e"),a=r("9bf2"),s=r("5c6c");e.exports=function(e,t,r){var n=o(t);n in e?a.f(e,n,s(0,r)):e[n]=r}},"8fd8":function(e,t,r){"use strict";var o=r("2908"),a=r.n(o);a.a},"91e3":function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("head-top"),r("el-row",{staticStyle:{"margin-top":"20px"}},[r("el-col",{attrs:{span:14,offset:4}},[r("header",{staticClass:"form_header"},[e._v("选择食品种类")]),r("el-form",{ref:"categoryForm",staticClass:"form",attrs:{model:e.categoryForm,"label-width":"110px"}},[r("el-row",{staticClass:"category_select"},[r("el-form-item",{attrs:{label:"食品种类"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:e.selectValue.label},model:{value:e.categoryForm.categorySelect,callback:function(t){e.$set(e.categoryForm,"categorySelect",t)},expression:"categoryForm.categorySelect"}},e._l(e.categoryForm.categoryList,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),r("el-row",{staticClass:"add_category_row",class:e.showAddCategory?"showEdit":""},[r("div",{staticClass:"add_category"},[r("el-form-item",{attrs:{label:"食品种类",prop:"name"}},[r("el-input",{model:{value:e.categoryForm.name,callback:function(t){e.$set(e.categoryForm,"name",t)},expression:"categoryForm.name"}})],1),r("el-form-item",{attrs:{label:"种类描述",prop:"description"}},[r("el-input",{model:{value:e.categoryForm.description,callback:function(t){e.$set(e.categoryForm,"description",t)},expression:"categoryForm.description"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitcategoryForm("categoryForm")}}},[e._v("提交")])],1)],1)]),r("div",{staticClass:"add_category_button",on:{click:e.addCategoryFun}},[e.showAddCategory?r("i",{staticClass:"el-icon-caret-top edit_icon"}):r("i",{staticClass:"el-icon-caret-bottom edit_icon",attrs:{slot:"icon"},slot:"icon"}),r("span",[e._v("添加食品种类")])])],1),r("header",{staticClass:"form_header"},[e._v("添加食品")]),r("el-form",{ref:"foodForm",staticClass:"form food_form",attrs:{model:e.foodForm,rules:e.foodrules,"label-width":"110px"}},[r("el-form-item",{attrs:{label:"食品名称",prop:"name"}},[r("el-input",{model:{value:e.foodForm.name,callback:function(t){e.$set(e.foodForm,"name",t)},expression:"foodForm.name"}})],1),r("el-form-item",{attrs:{label:"食品活动",prop:"activity"}},[r("el-input",{model:{value:e.foodForm.activity,callback:function(t){e.$set(e.foodForm,"activity",t)},expression:"foodForm.activity"}})],1),r("el-form-item",{attrs:{label:"食品详情",prop:"description"}},[r("el-input",{model:{value:e.foodForm.description,callback:function(t){e.$set(e.foodForm,"description",t)},expression:"foodForm.description"}})],1),r("el-form-item",{attrs:{label:"上传食品图片"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.baseUrl+"/v4/addimg/food","show-file-list":!1,"on-success":e.uploadImg,"before-upload":e.beforeImgUpload}},[e.foodForm.image_path?r("img",{staticClass:"avatar",attrs:{src:e.baseImgPath+e.foodForm.image_path}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),r("el-form-item",{attrs:{label:"食品特点"}},[r("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.foodForm.attributes,callback:function(t){e.$set(e.foodForm,"attributes",t)},expression:"foodForm.attributes"}},e._l(e.attributes,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"食品规格"}},[r("el-radio",{staticClass:"radio",attrs:{label:"one"},model:{value:e.foodSpecs,callback:function(t){e.foodSpecs=t},expression:"foodSpecs"}},[e._v("单规格")]),r("el-radio",{staticClass:"radio",attrs:{label:"more"},model:{value:e.foodSpecs,callback:function(t){e.foodSpecs=t},expression:"foodSpecs"}},[e._v("多规格")])],1),"one"==e.foodSpecs?r("el-row",[r("el-form-item",{attrs:{label:"包装费"}},[r("el-input-number",{attrs:{min:0,max:100},model:{value:e.foodForm.specs[0].packing_fee,callback:function(t){e.$set(e.foodForm.specs[0],"packing_fee",t)},expression:"foodForm.specs[0].packing_fee"}})],1),r("el-form-item",{attrs:{label:"价格"}},[r("el-input-number",{attrs:{min:0,max:1e4},model:{value:e.foodForm.specs[0].price,callback:function(t){e.$set(e.foodForm.specs[0],"price",t)},expression:"foodForm.specs[0].price"}})],1)],1):r("el-row",{staticStyle:{overflow:"auto","text-align":"center"}},[r("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("添加规格")]),r("el-table",{staticStyle:{"margin-bottom":"20px"},attrs:{data:e.foodForm.specs,"row-class-name":e.tableRowClassName}},[r("el-table-column",{attrs:{prop:"specs",label:"规格"}}),r("el-table-column",{attrs:{prop:"packing_fee",label:"包装费"}}),r("el-table-column",{attrs:{prop:"price",label:"价格"}}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(r){return e.handleDelete(t.$index)}}},[e._v("删除")])]}}])})],1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addFood("foodForm")}}},[e._v("确认添加食品")])],1)],1),r("el-dialog",{attrs:{title:"添加规格"},model:{value:e.dialogFormVisible,callback:function(t){e.dialogFormVisible=t},expression:"dialogFormVisible"}},[r("el-form",{attrs:{rules:e.specsFormrules,model:e.specsForm}},[r("el-form-item",{attrs:{label:"规格","label-width":"100px",prop:"specs"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.specsForm.specs,callback:function(t){e.$set(e.specsForm,"specs",t)},expression:"specsForm.specs"}})],1),r("el-form-item",{attrs:{label:"包装费","label-width":"100px"}},[r("el-input-number",{attrs:{min:0,max:100},model:{value:e.specsForm.packing_fee,callback:function(t){e.$set(e.specsForm,"packing_fee",t)},expression:"specsForm.packing_fee"}})],1),r("el-form-item",{attrs:{label:"价格","label-width":"100px"}},[r("el-input-number",{attrs:{min:0,max:1e4},model:{value:e.specsForm.price,callback:function(t){e.$set(e.specsForm,"price",t)},expression:"specsForm.price"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.addspecs}},[e._v("确 定")])],1)],1)],1)],1)],1)},a=[],s=(r("a4d3"),r("e01a"),r("d81d"),r("a434"),r("b0c0"),r("a9e3"),r("5530")),n=(r("96cf"),r("1da1")),i=r("b9b3"),c=r("bdaa"),l=r("51be"),u={data:function(){return{baseUrl:l["b"],baseImgPath:l["a"],restaurant_id:1,categoryForm:{categoryList:[],categorySelect:"",name:"",description:""},foodForm:{name:"",description:"",image_path:"",activity:"",attributes:[],specs:[{specs_name:"默认",packing_fee:0,price:20}]},foodrules:{name:[{required:!0,message:"请输入食品名称",trigger:"blur"}]},attributes:[{value:"新",label:"新品"},{value:"招牌",label:"招牌"}],showAddCategory:!1,foodSpecs:"one",dialogFormVisible:!1,specsForm:{specs_name:"",packing_fee:0,price:20},specsFormrules:{specs:[{required:!0,message:"请输入规格",trigger:"blur"}]}}},components:{headTop:i["a"]},created:function(){var e=this;this.$route.query.restaurant_id?this.restaurant_id=this.$route.query.restaurant_id:(this.restaurant_id=Math.ceil(10*Math.random()),this.$msgbox({title:"提示",message:"添加食品需要选择一个商铺，先去就去选择商铺吗？",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",beforeClose:function(t,r,o){"confirm"===t?(e.$router.push("/shopList"),o()):(e.$message({type:"info",message:"取消"}),o())}})),this.initData()},computed:{selectValue:function(){return this.categoryForm.categoryList[this.categoryForm.categorySelect]||{}}},methods:{initData:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(c["m"])(e.restaurant_id);case 3:r=t.sent,console.log(r),1==r.status?(r.category_list.map((function(e,t){e.value=t,e.label=e.name})),e.categoryForm.categoryList=r.category_list):console.log(r),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},addCategoryFun:function(){this.showAddCategory=!this.showAddCategory},submitcategoryForm:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(r){var o,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=14;break}return o={name:t.categoryForm.name,description:t.categoryForm.description,shop_id:t.restaurant_id},e.prev=2,e.next=5,Object(c["a"])(o);case 5:a=e.sent,1==a.status&&(t.initData(),t.categoryForm.name="",t.categoryForm.description="",t.showAddCategory=!1,t.$message({type:"success",message:"添加成功"})),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),console.log(e.t0);case 12:e.next=16;break;case 14:return t.$notify.error({title:"错误",message:"请检查输入是否正确",offset:100}),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}())},uploadImg:function(e,t){1==e.status?this.foodForm.image_path=e.image_path:this.$message.error("上传图片失败！")},beforeImgUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type,r=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),r||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&r},addspecs:function(){this.foodForm.specs.push(Object(s["a"])({},this.specsForm)),this.specsForm.specs="",this.specsForm.packing_fee=0,this.specsForm.price=20,this.dialogFormVisible=!1},handleDelete:function(e){this.foodForm.specs.splice(e,1)},tableRowClassName:function(e,t){return 1===t?"info-row":3===t?"positive-row":""},addFood:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(r){var o,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=15;break}return o=Object(s["a"])({},t.foodForm,{category_id:t.selectValue.id,shop_id:Number(t.restaurant_id)}),e.prev=2,console.log(o),e.next=6,Object(c["b"])(o);case 6:a=e.sent,1==a.status?(console.log(a),t.$message({type:"success",message:"添加成功"}),t.foodForm={name:"",description:"",image_path:"",activity:"",attributes:[],specs:[{specs_name:"默认",packing_fee:0,price:20}]}):t.$message({type:"error",message:a.message}),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](2),console.log(e.t0);case 13:e.next=17;break;case 15:return t.$notify.error({title:"错误",message:"请检查输入是否正确",offset:100}),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}())}}},m=u,p=(r("8fd8"),r("2877")),f=Object(p["a"])(m,o,a,!1,null,null,null);t["default"]=f.exports},a434:function(e,t,r){"use strict";var o=r("23e7"),a=r("23cb"),s=r("a691"),n=r("50c4"),i=r("7b0b"),c=r("65f0"),l=r("8418"),u=r("1dde"),m=r("ae40"),p=u("splice"),f=m("splice",{ACCESSORS:!0,0:0,1:2}),d=Math.max,b=Math.min,g=9007199254740991,h="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!p||!f},{splice:function(e,t){var r,o,u,m,p,f,v=i(this),y=n(v.length),F=a(e,y),_=arguments.length;if(0===_?r=o=0:1===_?(r=0,o=y-F):(r=_-2,o=b(d(s(t),0),y-F)),y+r-o>g)throw TypeError(h);for(u=c(v,o),m=0;m<o;m++)p=F+m,p in v&&l(u,m,v[p]);if(u.length=o,r<o){for(m=F;m<y-o;m++)p=m+o,f=m+r,p in v?v[f]=v[p]:delete v[f];for(m=y;m>y-o+r;m--)delete v[m-1]}else if(r>o)for(m=y-o;m>F;m--)p=m+o-1,f=m+r-1,p in v?v[f]=v[p]:delete v[f];for(m=0;m<r;m++)v[m+F]=arguments[m+2];return v.length=y-o+r,u}})},a9e3:function(e,t,r){"use strict";var o=r("83ab"),a=r("da84"),s=r("94ca"),n=r("6eeb"),i=r("5135"),c=r("c6b6"),l=r("7156"),u=r("c04e"),m=r("d039"),p=r("7c73"),f=r("241c").f,d=r("06cf").f,b=r("9bf2").f,g=r("58a8").trim,h="Number",v=a[h],y=v.prototype,F=c(p(y))==h,_=function(e){var t,r,o,a,s,n,i,c,l=u(e,!1);if("string"==typeof l&&l.length>2)if(l=g(l),t=l.charCodeAt(0),43===t||45===t){if(r=l.charCodeAt(2),88===r||120===r)return NaN}else if(48===t){switch(l.charCodeAt(1)){case 66:case 98:o=2,a=49;break;case 79:case 111:o=8,a=55;break;default:return+l}for(s=l.slice(2),n=s.length,i=0;i<n;i++)if(c=s.charCodeAt(i),c<48||c>a)return NaN;return parseInt(s,o)}return+l};if(s(h,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var w,x=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof x&&(F?m((function(){y.valueOf.call(r)})):c(r)!=h)?l(new v(_(t)),r,x):_(t)},k=o?f(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),O=0;k.length>O;O++)i(v,w=k[O])&&!i(x,w)&&b(x,w,d(v,w));x.prototype=y,y.constructor=x,n(a,h,x)}},b0c0:function(e,t,r){var o=r("83ab"),a=r("9bf2").f,s=Function.prototype,n=s.toString,i=/^\s*function ([^ (]*)/,c="name";o&&!(c in s)&&a(s,c,{configurable:!0,get:function(){try{return n.call(this).match(i)[1]}catch(e){return""}}})},b9b3:function(e,t,r){"use strict";var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"header_container"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/manage"}}},[e._v("首页")]),e._l(e.$route.meta,(function(t,o){return r("el-breadcrumb-item",{key:o},[e._v(e._s(t))])}))],2),r("el-dropdown",{attrs:{"menu-align":"start"},on:{command:e.handleCommand}},[r("img",{staticClass:"avator",attrs:{src:e.baseImgPath+e.adminInfo.avatar}}),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",{attrs:{command:"home"}},[e._v("首页")]),r("el-dropdown-item",{attrs:{command:"signout"}},[e._v("退出")])],1)],1)],1)},a=[],s=(r("96cf"),r("1da1")),n=r("5530"),i=r("bdaa"),c=r("51be"),l=r("2f62"),u={data:function(){return{baseImgPath:c["a"]}},created:function(){this.adminInfo.id||this.getAdminData()},computed:Object(n["a"])({},Object(l["c"])(["adminInfo"])),methods:Object(n["a"])({},Object(l["b"])(["getAdminData"]),{handleCommand:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if("home"!=e){r.next=4;break}t.$router.push("/manage"),r.next=9;break;case 4:if("signout"!=e){r.next=9;break}return r.next=7,Object(i["D"])();case 7:o=r.sent,1==o.status?(t.$message({type:"success",message:"退出成功"}),t.$router.push("/")):t.$message({type:"error",message:o.message});case 9:case"end":return r.stop()}}),r)})))()}})},m=u,p=(r("6c92"),r("2877")),f=Object(p["a"])(m,o,a,!1,null,null,null);t["a"]=f.exports},d81d:function(e,t,r){"use strict";var o=r("23e7"),a=r("b727").map,s=r("1dde"),n=r("ae40"),i=s("map"),c=n("map");o({target:"Array",proto:!0,forced:!i||!c},{map:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},dbb4:function(e,t,r){var o=r("23e7"),a=r("83ab"),s=r("56ef"),n=r("fc6a"),i=r("06cf"),c=r("8418");o({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(e){var t,r,o=n(e),a=i.f,l=s(o),u={},m=0;while(l.length>m)r=a(o,t=l[m++]),void 0!==r&&c(u,t,r);return u}})},e439:function(e,t,r){var o=r("23e7"),a=r("d039"),s=r("fc6a"),n=r("06cf").f,i=r("83ab"),c=a((function(){n(1)})),l=!i||c;o({target:"Object",stat:!0,forced:l,sham:!i},{getOwnPropertyDescriptor:function(e,t){return n(s(e),t)}})}}]);
//# sourceMappingURL=addGoods.ff070b91.js.map